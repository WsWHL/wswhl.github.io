[{"title":"è§£å†³centos dnfè‡ªåŠ¨æ›´æ–°å¼‚å¸¸é—®é¢˜","url":"/2023/05/10/centos-dnf-makecache/","content":"èµ·å› æœ€è¿‘å‘ç°ä»£ç†æœåŠ¡æ€»æ˜¯å‡ºç°è«åä¸­æ–­ä¸å¯è®¿é—®çš„å¼‚å¸¸é—®é¢˜ï¼Œåˆšå¼€å§‹æ€€ç–‘æ˜¯æœºå™¨æ­å»ºçš„æœåŠ¡å¤ªå¤šå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜å¯¼è‡´çš„ï¼Œäºæ˜¯ç”¨topå‘½ä»¤æŸ¥äº†ä¸€ä¸‹å ç”¨æœ€å¤šçš„æœåŠ¡ä¹Ÿå°±200Mbï¼Œæ€»å…±å ç”¨ä¹Ÿå°±ç™¾åˆ†ä¹‹å…­ä¸ƒåï¼Œä¸åº”è¯¥å¯¼è‡´æœåŠ¡å´©æºƒï¼Œäºæ˜¯åˆæŸ¥è¯¢äº†ä¸€ä¸‹ç³»ç»Ÿæ—¥å¿—æ‰å‘ç°ç«¯å€ª.\n\n\né—®é¢˜æ’æŸ¥æŸ¥è¯¢ç³»ç»Ÿé”™è¯¯å’Œè­¦å‘Šæ—¥å¿—ï¼š\njournalctl -p err..alert\n\nkernel: Out of memory: Killed process 1813 (dnf) total-vm:842700kB, anon-rss:259464kB, file-rss:0kB, shmem-rss:0kB, UID:0 pgtables:1236kB oom_score_adj:0systemd[1]: Failed to start dnf makecache.\n\nåŸæ¥æ˜¯ç”±äºdnfè½¯ä»¶åŒ…ä¿¡æ¯æ›´æ–°å¯¼è‡´çš„ç³»ç»ŸOOMå´©æºƒ.\nè§£å†³æ–¹æ¡ˆç”±äºä¸»æœºå†…å­˜æœ‰é™ï¼ˆ1Gï¼‰, äºæ˜¯åªèƒ½é€‰æ‹©å…ˆç¦ç”¨ï¼Œä¼˜å…ˆä¿è¯æœåŠ¡æ­£å¸¸è¿è½¬.\nç¦ç”¨å®šæ—¶æœåŠ¡ï¼š\nsystemctl stop dnf-makecache.timersystemctl disable dnf-makecache.timer","categories":["æ¯æ—¥ä¸€è®°"],"tags":["linux"]},{"title":"ClasshXåè®®é…ç½®","url":"/2023/10/13/classhx-protocol/","content":"VLESS- name: &lt;åç§°&gt;  type: vless  server: &lt;æœåŠ¡åœ°å€&gt;  port: &lt;æœåŠ¡ç«¯å£&gt;  uuid: &lt;æ ‡è¯†ID&gt;  alterId: 64  cipher: auto  udp: true  network: ws  sni: &lt;æœåŠ¡åœ°å€&gt;  tls: true  ws-opts:    path: /&lt;å›é€€è·¯å¾„&gt;    headers:      Host: &lt;æœåŠ¡åœ°å€&gt;"},{"title":"Pythonè£…é¥°å™¨","url":"/2020/04/05/decorator/","content":"ç†è§£è£…é¥°å™¨ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ç”¨æ¥åŒ…è£…çš„ï¼Œåœ¨è¡¨é¢è¿›è¡Œä¿®é¥°çš„æ–¹å¼ã€‚\nè£…é¥°å™¨æœ¬èº«å°±æ˜¯ä¸€ç§å‡½æ•°æˆ–ç±»ï¼Œè¿”å›å€¼åŒæ ·ä¹Ÿæ˜¯å‡½æ•°æˆ–ç±»ã€‚å®ƒçš„æ„ä¹‰ä¸»è¦åœ¨äºæ— éœ€å¯¹åŸæœ‰ä»£ç è¿›è¡Œä¿®æ”¹çš„å‰æä¸‹æ·»åŠ ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œé‡‡ç”¨ä¸€ç§åˆ‡é¢ç¼–ç¨‹æ€æƒ³ï¼Œæ¯”å¦‚å¸¸ç”¨çš„åº”ç”¨åœºæ™¯æ—¥å¿—è®°å½•ã€æ€§èƒ½æµ‹è¯•ã€äº‹ç‰©å¤„ç†ã€æƒé™æ ¡éªŒã€ç¼“å­˜ç­‰åŠŸèƒ½ã€‚æœ‰äº†è£…é¥°å™¨æˆ‘ä»¬èƒ½å¤Ÿå°½å¯èƒ½çš„é‡ç”¨ä»£ç ï¼Œé¿å…å¤§é‡é‡å¤ä»£ç ï¼Œæœ‰æ•ˆçš„è§„é¿è§„é¿å¯¹ç°æœ‰ä¸šåŠ¡ä»£ç è¿›è¡Œæ”¹åŠ¨å¯¼è‡´æ–°çš„äº§ç”Ÿã€‚\n\nDemoæœ¬æ–‡ä¸»è¦æ¼”ç¤ºæ‰‹åŠ¨å®ç°å’Œé‡‡ç”¨Pythonè¯­æ³•ç³–å®ç°æ–¹å¼ã€‚\næ‰‹åŠ¨å®ç°1.ç®€å•å‡½æ•°è°ƒç”¨\ndef test(func):  print(&#x27;begin execution func.&#x27;)  func()  print(&#x27;func execution ends.&#x27;)  def hello():  print(&#x27;hello.&#x27;)  test(hello)\n\næ‰“å°è¾“å‡ºï¼š\n\nbegin execution func.\nhello.\nfunc execution ends.\n\n2.æ—¥å¿—è®°å½•\nimport timedef logger(func):  def wrapper():    print(&#x27;[%d]start run %s.&#x27; % (int(time.time()), func.__name__))    return func()  return wrapperdef test():  print(&#x27;wait 10 seconds.&#x27;)  time.sleep(10)  hello = logger(test)hello()\n\næ‰“å°è¾“å‡ºï¼š\n\n[1563619707]start run test.\nwait 10 seconds.\n\nä¸Šé¢ä¾‹å­ä¸­ï¼Œloggerå‡½æ•°ä¸­çš„wrapperå‡½æ•°å°†åŸtestå‡½æ•°åŒ…è£…åè¿”å›ï¼Œæœ€åè°ƒç”¨æ‰§è¡Œã€‚\n@ è¯­æ³•ç³–å¦‚æœä½ äº†è§£Pythonè¯­æ³•ï¼Œä¸€å®šçœ‹åˆ°æˆ–ä½¿ç”¨è¿‡@ç¬¦å·ï¼Œ@å°±æ˜¯Pythonä¸­è£…é¥°å™¨çš„è¯­æ³•ç³–ã€‚ä½¿ç”¨æ—¶åæ­£ç›®æ ‡å‡½æ•°å®šä¹‰çš„åœ°æ–¹ï¼Œè¿™æ ·å³å¯çœç•¥æ‰èµ‹å€¼çš„è¿‡ç¨‹ã€‚\n1.æ— å‚è£…é¥°å™¨\nimport timedef logger(func):  def wrapper():    print(&#x27;[%d]start run %s.&#x27; % (int(time.time()), func.__name__))    return func()  return wrapper@loggerdef test():  print(&#x27;wait 10 seconds.&#x27;)  time.sleep(10)  test()\n\næ‰“å°è¾“å‡ºï¼š\n\n[1563621964]start run test.\nwait 10 seconds.\n\nä»¥ä¸Šä¾‹å­é‡‡ç”¨è£…é¥°å™¨çš„æ–¹å¼å¯ä»¥æ— ä¾µå…¥æ€§çš„æ·»åŠ æˆ–å®ç°é¢å¤–çš„åŠŸèƒ½ã€‚\n2.å¸¦å‚ç›®æ ‡å‡½æ•°è£…é¥°å™¨å†™æ³•\n\nå•ä¸ªå‚æ•°\ndef logger(func):  def wrapper(name):      print(&#x27;start run %s&#x27; % func.__name__)      return func(name)  return wrapper@loggerdef test(name):    print(&#x27;my name %s&#x27; % name)test(&#x27;this blog&#x27;)\n\nå¤šä¸ªå‚æ•°\ndef logger(func):  \tdef wrapper(*args):  \t\tprint(&#x27;start run %s&#x27; % func.__name__)    \treturn func(*args)  return wrapper@loggerdef test(name, age):  \tprint(&#x27;my name %s,age %d&#x27; % (name, age))  test(&#x27;this blog&#x27;, 1)\n\n\n\nå…³é”®å­—å‚æ•°\ndef logger(func):  \tdef wrapper(*args, **kwargs):  \t\tprint(&#x27;start run %s&#x27; % func.__name__)    \treturn func(*args, **kwargs)  return wrapper@loggerdef test(name, age, phone=None, address=None):  \tprint(&#x27;my name %s,age %d,phone %d,address %s&#x27; % (name, age, phone, address))  test(&#x27;this blog&#x27;, 1, phone=124334, address=&quot;test address&quot;)\n\nå¸¦å‚è£…é¥°å™¨\ndef logger(level):  def decorator(func):        def wrapper(*args, **kwargs):      print(&#x27;[%s]start run %s&#x27; % (level, func.__name__))    \treturn func(*args, **kwargs)  \treturn wrapper  return decorator@logger(level=&quot;INFO&quot;)def test(name, age, phone=None, address=None):  \tprint(&#x27;my name %s,age %d,phone %d,address %s&#x27; % (name, age, phone, address))  test(&#x27;this blog&#x27;, 1, phone=124334, address=&quot;test address&quot;)\n\næ‰“å°ä¿¡æ¯ï¼š\n\n[INFO]start run test\nmy name this blog,age 1,phone 124334,address test address\n\nå¸¦å‚è£…é¥°å™¨è¿”å›çš„æœ¬å°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œ@logger(level=&quot;INFO&quot;)ç­‰åŒäºdecorator\n\n\n 3.ç±»è£…é¥°å™¨\nè£…é¥°å™¨ä¸ä»…ä»…å¯ä»¥æ˜¯å‡½æ•°ï¼Œä¹Ÿå¯æ˜¯ç±»ã€‚ç±»è£…é¥°å™¨å…·æœ‰æ›´å¤§çš„çµæ´»æ€§ã€é«˜ç±»èšã€å°è£…æ€§ç­‰ä¼˜ç‚¹ã€‚ç±»è£…é¥°å™¨ä¸»è¦åˆ©ç”¨ç±»çš„ä¸€ä¸ª__call__æ–¹æ³•å®ç°ï¼Œ@å½¢å¼è£…é¥°å™¨é™„åŠ åˆ°å‡½æ•°ä¸Šæ—¶å°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚\n  ä¸€ä¸ªå¯¹è±¡ä¸ºå¯è°ƒç”¨å¯¹è±¡callableæ—¶å°±ä¼šå®ç°__call__æ–¹æ³• \n  import timeclass logger:    def __init__(self, func):    \tself.func = func    def __call__(self, *args, **kwargs):    \tprint(&#x27;[args]name %s, age %d&#x27; % *args)    \tprint(&#x27;start run %s:%d&#x27; % (self.func.__name__, int(time.time())))    \tself.func(*args, **kwargs)    \tprint(&#x27;%s running is complete:%d&#x27; % (self.func.__name__, int(time.time())))          @loggerdef test(name, age):  \tprint(&#x27;my is name %s, age %d&#x27; % (name, age))    print(&#x27;wait 10 seconds.&#x27;)    time.sleep(10)test(&#x27;this blog&#x27;, 1)\n\n  æ‰“å°è¾“å‡ºï¼š\n\n[args]ame this blog, age 1\nstart run test:1563626058\nmy is name this blog, age 1\nwait 10 seconds.\ntest running is complete:1563626068\n\n  åœ¨æ‰§è¡Œå¸¦å‚ç›®æ ‡å‡½æ•°æ—¶ï¼Œå‚æ•°ä¼šä¼ é€’ç»™ç±»è£…é¥°å™¨çš„__call__æ–¹æ³•ï¼Œç„¶åæˆ‘ä»¬å°†å‚æ•°ä¼ é€’ç»™ç›®æ ‡æ–¹æ³•æ‰§è¡Œã€‚\n4.å¤šä¸ªè£…é¥°å™¨ä½¿ç”¨\nä¸€ä¸ªå‡½æ•°å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªè£…é¥°å™¨ï¼Œæ‰§è¡Œé¡ºåºä¸ºç”±å†…è€Œå¤–ã€‚\n@func3@func2@func1def test():  pass# ç­‰æ•ˆä½¿ç”¨æ–¹å¼func = func3(func2(func1(test)))\n","categories":["Python"],"tags":["è£…é¥°å™¨"]},{"title":"Elasticsearch parent childç´¢å¼•æ„å»º","url":"/2020/04/05/es-parent-child/","content":"æ³¨æ„äº‹é¡¹\næˆ‘ä»¬åœ¨ä½¿ç”¨esæŸ¥è¯¢å®¢æˆ·ç«¯æ—¶ï¼Œéœ€è¦æ³¨æ„å®¢æˆ·ç«¯ç‰ˆæœ¬æ˜¯å¦ä¸æœåŠ¡ç«¯ç‰ˆæœ¬å…¼å®¹ï¼Œå› ä¸ºä¸åŒç‰ˆæœ¬æ‰€ç”Ÿæˆçš„æŸ¥è¯¢è¯­æ³•å¯èƒ½ä¼šæœ‰å¾ˆå¤§çš„å·®åˆ«ï¼Œä»¥è‡³äºå‡ºç°æŸ¥è¯¢å¼‚å¸¸ï¼Œæˆ–å®Œå…¨æ— æ•ˆçš„æƒ…å†µï¼Œæ‰€ä»¥è¦ä½¿ç”¨å¯¹åº”ç‰ˆæœ¬å’Œå¯¹åº”è¯­æ³•ç¼–å†™ã€‚\næœ‰äº›ç‰¹æ®Šçš„æŸ¥è¯¢è¯­æ³•ï¼Œå¯¹ç´¢å¼•çš„åˆ›å»ºæ–¹å¼ä¸¥æ ¼çš„è¦æ±‚ï¼Œä¸”æ— æ³•ç›´æ¥åœ¨åˆ›å»ºåå»è¿›è¡Œä¿®æ”¹å®ç°ã€‚ä¾‹å¦‚ï¼šé»˜è®¤å­—æ®µæŸ¥è¯¢æ—¶æ˜¯ä»¥Matchåˆ†è¯è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœè¦ä½¿ç”¨termæŸ¥è¯¢æ–¹å¼ï¼Œåˆ™éœ€è¦å°†å¯¹äºå­—æ®µè®¾ç½®ä¸ºkeywordç±»å‹ï¼ŒæŸåˆ™è¯¥æŸ¥è¯¢è¯­æ³•æ— æ•ˆï¼Œæˆ–è€…åŒ¹é…åˆ°ä¸å®Œå…¨ä¸€è‡´çš„ç»“æœï¼Œéƒ¨åˆ†ç‰¹æ®Šå­—æ®µä¹Ÿéœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œæ¯”å¦‚ipã€é‚®ç®±ã€ç¼–å·ç­‰è¿™ä¸€ç±»ã€‚\nParent Child Queryç»“æ„ï¼Œåªèƒ½å»ºç«‹ä¸€ç§æ–‡æ¡£å…³è”å…³ç³»ï¼Œä»è€Œé¿å…ä¸€ä¸ªæ–‡æ¡£å†—ä½™æ•°æ®å¤ªå¤šå½±å“æŸ¥è¯¢æ•ˆç‡ã€‚\n\nParent Child Queryåˆ›å»ºç´¢å¼•è¿™é‡Œå°±ç®€å•çš„ä½¿ç”¨eså®˜ç½‘çš„ä¸€ä¸ªä¾‹å­ã€‚\n\nç¼–å†™æ¨¡å‹ç±»\n  public abstract class MyDocument&#123;\tpublic int Id &#123; get; set; &#125;\tpublic JoinField MyJoinField &#123; get; set; &#125;&#125;public class MyParent : MyDocument&#123;\t[Text]\tpublic string ParentProperty &#123; get; set; &#125;&#125;public class MyChild : MyDocument&#123;\t[Text]\tpublic string ChildProperty &#123; get; set; &#125;&#125;public class MyChild1 : MyDocument&#123;\t[Text]\tpublic string ChildProperty &#123; get; set; &#125;&#125;\n\nåˆ›å»ºç´¢å¼•\nvar createIndexResponse = client.Indices.Create(&quot;index&quot;, c =&gt; c    .Index&lt;MyDocument&gt;()    .Map&lt;MyDocument&gt;(m =&gt; m        .RoutingField(r =&gt; r.Required())         .AutoMap&lt;MyParent&gt;()         .AutoMap&lt;MyChild&gt;() \t\t.AutoMap&lt;MyChild1&gt;()        .Properties(props =&gt; props            .Join(j =&gt; j                 .Name(p =&gt; p.MyJoinField)                .Relations(r =&gt; r                    .Join&lt;MyParent&gt;(typeof(MyChild), typeof(MyChild1))                )            )\t\t\t.Keyword(s =&gt; s.Name(f =&gt; f.Id))\t\t\t.Keyword(s =&gt; new KeywordPropertyDescriptor&lt;MyChild1&gt;().Name(f =&gt; f.ChildProperty))        )    ));\n*** æŸ¥è¯¢ç´¢å¼•æ˜ å°„ä¿¡æ¯ï¼š/index/_mappingï¼Œæ‰€ä»¥è¦æƒ³ä¿®æ”¹ç´¢å¼•æ˜ å°„ä¿¡æ¯åªèƒ½åˆ é™¤é‡å»º ***\n\n\næŸ¥è¯¢ä¸»è¦æœ‰å››ç§æŸ¥è¯¢æ–¹å¼ï¼š\n\nParent Id Query\nq.ParentId(p =&gt; p    .Type&lt;MyDocument&gt;()    .Id(MyParent.Id))\n\nå¯ä»¥æ ¹æ®çˆ¶Idï¼Œæ‰¾å‡ºæ‰€æœ‰ç›¸å…³çš„å­ç±»å‹æ•°æ®ã€‚\n\n\nHas Parent Query\nq.HasParent&lt;MyParent&gt;(c =&gt; c    .Query(qq =&gt; qq.MatchAll()))\n\nå¯ä»¥æ ¹æ®çˆ¶ç±»çš„ç›¸å…³å±æ€§åŒ¹é…å‡ºå¯¹åº”å…³è”çš„å­ç±»æ•°æ®ã€‚\n\n\nHas Child Query\nq.HasChild&lt;MyChild&gt;(c =&gt; c    .MaxChildren(5)    .MinChildren(1)    .ScoreMode(ChildScoreMode.Average)    .Query(qq =&gt; qq.MatchAll()))\n\nå¯ä»¥æ ¹æ®å­ç±»çš„ç›¸å…³å±æ€§ï¼ŒåŒ¹é…å‡ºå­ç±»å…³è”çš„çˆ¶ç±»æ•°æ®ã€‚\n\n\nFind JoinField Type\nq.HasRelationName&lt;MyParent&gt;(x =&gt; x.MyJoinField).MatchAll()\n\nå¯ä»¥æ ¹æ®æŒ‡å®šJoinFieldç±»å‹ç­›é€‰ç›¸å…³æ•°æ®ã€‚\n\n å¤‡æ³¨ï¼šæŸ¥è¯¢æ—¶å¹¶ä¸èƒ½åƒå¸¸è§„çš„å…³ç³»å‹æ•°æ®åº“è¿›è¡Œè”åˆæŸ¥è¯¢ï¼Œå› æ­¤å½“æˆ‘ä»¬éœ€è¦æ ¹æ®çˆ¶ç±»å‹å’Œå­ç±»å‹å±æ€§è¿›è¡Œæ•°æ®ç­›é€‰æ—¶ï¼Œæœ€å¥½å°†ç›¸å…³å­—æ®µæ•°æ®å†—ä½™åˆ°ä¸€ä¸ªç±»å‹ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿çš„æŸ¥è¯¢ã€‚\n\n\n","categories":["æ¯æ—¥ä¸€è®°"],"tags":["Elasticsearch","Indexer"]},{"title":"hexoåšå®¢åœ¨çº¿ç¼–è¾‘åŒæ­¥æœåŠ¡hexonéƒ¨ç½²","url":"/2023/05/07/hexon-deploy/","content":"hexoæ¡†æ¶æ˜¯ä¸€ä¸ªä¸»é¢˜ä¸°å¯Œ, å†…å®¹ç®€æ´çš„è½»é‡çº§é™æ€åšå®¢æ¡†æ¶. ä½†ä¹Ÿæ­£æ˜¯å¦‚æ­¤åœ¨å®é™…ä½¿ç”¨ä¸­ç¼ºé™·ä¹Ÿå¾ˆæ˜æ˜¾, é‚£å°±æ˜¯åšå®¢æ–‡ç« å†…å®¹ä¸æ–¹ä¾¿ç®¡ç†, æ¯æ¬¡ç¼–å†™å¥½markdownæ–‡ä»¶è¿˜éœ€è¦ç»è¿‡hexoå‘½ä»¤ç¼–è¯‘æ‰“åŒ…æ¨é€ç­‰æ­¥éª¤, è™½ç„¶å‘½ä»¤ä¸å¤š, ä½†ä½“éªŒå¾ˆä¸å¥½, æœ‰ç§å¾ˆæ˜æ˜¾çš„è„±ç¦»æ„Ÿ. è€Œhexonçš„å‡ºç°å¾ˆå¥½çš„å¼¥è¡¥äº†è¿™äº›ä¸è¶³ä¹‹å¤„, ä¸ºhexonä½œè€…ç‚¹ä¸ªå¤§å¤§çš„èµğŸ‘!!!\n\n\nè‡³æ­¤, å½“æˆ‘ä»¬éƒ¨ç½²hexonæœåŠ¡åæˆ‘ä»¬å¯ä»¥å®ç°å¦‚ä¸‹æ•ˆæœ:\n\nåŒæ­¥åšå®¢gitå†…å®¹, å®ç°åœ¨çº¿ç¼–è¾‘å¹¶æ¨é€, é…ç½®å¥½GitHub Actionåå¯ä»¥è‡ªåŠ¨è§¦å‘éƒ¨ç½²\né€šè¿‡hexonç¼–è¾‘åšå®¢æ–‡ç« å, ç›´æ¥åœ¨æˆ‘ä»¬çš„æœåŠ¡å™¨è¿›è¡Œæ‰“åŒ…éƒ¨ç½², ç¼–è¯‘å¥½çš„å†…å®¹å°†ç›´æ¥æ¨é€åˆ°GitHubä»“åº“çš„gp-pagesåˆ†æ”¯å®ç°è‡ªåŠ¨éƒ¨ç½², æ¥ç®¡GitHub Actionæ„å»ºåŠŸèƒ½\n\nâœ¨å‡†å¤‡å†…å®¹:\n\nğŸ’»ä¸€å°å…¬ç½‘vpsæœåŠ¡å™¨, 1Gè¶³çŸ£\nğŸ™GitHubè´¦å·, å¹¶åˆå§‹åŒ–å¥½hexoåšå®¢ä»“åº“\nğŸ‘‹Linuxå‘½ä»¤åŸºç¡€, ä¼šåŠ¨çš„å°æŒ‡å¤´\nğŸ¤”ï¸ä¸€é¢—å–„äºæ€è€ƒçš„å°è„‘ç“œâ€¦\n\né¡¹ç›®ä¾èµ–é¡¹gitã€pnpmã€nodeã€hexo\n\nå®‰è£…pnpmåŒ…ç®¡ç†å·¥å…·\nbash wget -qO- https://get.pnpm.io/install.sh | ENV=&quot;$HOME/.bashrc&quot; SHELL=&quot;$(which bash)&quot; bash -pnpm env use --global lts     # å®‰è£…nodeç¯å¢ƒ\nè¿™é‡Œä»…ä»¥linux 64ä½å¹³å°ä¸¾ä¾‹,å…·ä½“å¹³å°å‚è€ƒå®˜ç½‘: https://pnpm.io/installation\n\næ‹‰å–åšå®¢é¡¹ç›®é»˜è®¤é‡‡ç”¨rootç”¨æˆ·,åç»­hexonæœåŠ¡æ‹‰å–å’Œæäº¤åšå®¢ä»£ç å‡éœ€è¦è®¿é—®GitHubä»“åº“,å»ºè®®æå‰é…ç½®å¥½æœåŠ¡å™¨çš„ssh keyè®¿é—®é…ç½®, ç¡®ä¿gitå‘½ä»¤èƒ½æ­£å¸¸æ“ä½œä»“åº“\ngit clone git@github.com:&lt;github_name&gt;/&lt;github_name&gt;.github.io.gitnpm install -g hexo-cli      # å®‰è£…hexoå·¥å…·npm install      # è¿˜åŸåšå®¢é¡¹ç›®ä¾èµ–hexo server   # å¯æ£€æŸ¥åšå®¢æœåŠ¡æ˜¯å¦èƒ½æ­£å¸¸å¯åŠ¨\né¡¹ç›®åŒæ­¥gitæ—¶å°†ä¸æ‹‰å–åˆ†æ”¯ä¿æŒä¸€è‡´, éƒ¨ç½²æ—¶éœ€è¦åœ¨_config.ymlé…ç½®ä¸­æ·»åŠ å¦‚ä¸‹gh-pagesé…ç½®ä¿¡æ¯\n# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy:  type: git  repo: git@github.com:&lt;github_name&gt;/&lt;github_name&gt;.github.io.git  branch: gh-pages\n\n\næ‹‰å–hexoné¡¹ç›®å¹¶è¿˜åŸä¾èµ–, åˆå§‹åŒ–åšå®¢é…ç½®\ngit clone https://github.com/gethexon/hexon  # æ‹‰å–é¡¹ç›®pnpm install     # è¿˜åŸä¾èµ–é¡¹pnpm run setup       # åˆå§‹åŒ–åšå®¢é¡¹ç›®è·¯å¾„ç­‰é…ç½®ä¿¡æ¯\nå¯åŠ¨hexonæœåŠ¡\npnpm start\né»˜è®¤é…ç½®ç›‘å¬æœ¬åœ°5777ç«¯å£,æµè§ˆå™¨è®¿é—®: http://localhost:5777\n\n\nè¿›é˜¶æ•™ç¨‹, é‡‡ç”¨systemdéƒ¨ç½²\nåˆ›å»ºhexonæœåŠ¡é…ç½®åˆ›å»ºæ–‡ä»¶/etc/systemd/system/hexon.serviceå¹¶å†™å…¥å¦‚ä¸‹é…ç½®   [Unit]Description=Hexon ServiceAfter=network.target[Service]Environment=PATH=/root/.local/share/pnpm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/binWorkingDirectory=/opt/hexon/serverType=simpleUser=rootGroup=rootRestart=on-failureRestartSec=5sExecStart=pnpm cross-env NODE_ENV=production node dist/index.jsLimitNOFILE=1048576[Install]WantedBy=multi-user.target\nWorkingDirectory: è®¾ç½®ä¸ºæˆ‘ä»¬æ‹‰å–hexoné¡¹ç›®ä¸‹çš„serveræ–‡ä»¶å¤¹, å¯åŠ¨å‘½ä»¤ä¼šåœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡ŒUserã€Group: æœåŠ¡æ‰§è¡Œç”¨æˆ·ä¿¡æ¯, å°½é‡ä¿æŒå’Œæˆ‘ä»¬åœ¨ç»ˆç«¯æ‰§è¡Œæ—¶çš„ä¸€è‡´, å› ä¸ºå­˜åœ¨ä¸Šä¸‹æ–‡ä¾èµ–å…³ç³», æ¯”å¦‚gitæ‹‰å–æäº¤é¡¹ç›®æ—¶éœ€è¦sshå¯†é’¥æˆæƒç­‰\næ–‡ä»¶ä¸­PATHè¿½åŠ äº†pnpmç¯å¢ƒè·¯å¾„/root/.local/share/pnpmå¾ˆé‡è¦, åç»­hexonéœ€è¦æ‰§è¡Œè¯¥è·¯å¾„ä¸‹çš„ä¸€äº›å‘½ä»¤, å…·ä½“è·¯å¾„ä¸ºæˆ‘ä»¬å®‰è£…pnpmæ—¶æ‰€ä½¿ç”¨çš„ç”¨æˆ·ä¸»ç›®å½•ä¸‹éšè—æ–‡ä»¶å¤¹ä¸­\n\n\nå¯åŠ¨hexonå®ˆæŠ¤æœåŠ¡systemctl enable hexon     # æ·»åŠ è‡ªå¯systemctl start hexon      # å¯åŠ¨æœåŠ¡\n\nå¯åŠ¨åæŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ˜¯å¦æ­£å¸¸æ‰§è¡Œjournalctl -u hexon -f\n\n\n\nå…³äºhexonä¸è¶³ä¹‹å¤„çš„å‡ ç‚¹å»ºè®®:\n\nå¸Œæœ›èƒ½å¤Ÿæ”¯æŒæ’å…¥å›¾ç‰‡, å¹¶èƒ½å¤Ÿé…ç½®å›¾åºŠ(é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰æ–‡ä»¶å­˜å‚¨æœåŠ¡).\nå¸Œæœ›èƒ½å¤Ÿæ”¯æŒhexoé¡¹ç›®è®¾ç½®é¡¹çš„å¯è§†åŒ–é…ç½®, ä»¥æ­¤æ›´åŠ æ–¹ä¾¿ç®¡ç†å’Œé…ç½®\nå¸Œæœ›ç™»å½•æˆæƒæ”¯æŒåŒå› å­è®¤è¯(2FA), ä»è€Œæé«˜åå°æœåŠ¡å®‰å…¨æ€§\nå…¶ä»–å†…å®¹å¾…åç»­å……åˆ†ä½“éªŒåè¡¥å……â€¦\n\né¸£è°¢é¡¹ç›®hexon!!!\n","categories":["æ¯æ—¥ä¸€è®°"],"tags":["linux","Blog","hexon","hexo"]},{"title":"2019å¹´æˆéƒ½å„åŒºé™è´­ä¿¡æ¯","url":"/2020/04/05/house-purchase/","content":"åŒºåŸŸåˆ’åˆ†\n\n\nç±»åˆ«\nåŒºåŸŸ\n\n\n\nAç±»\nå¤©åºœæ–°åŒºã€æˆéƒ½ç›´ç®¡åŒº\n\n\nBç±»\né«˜æ–°å—éƒ¨å›­åŒº\n\n\nCç±»\né«˜æ–°å—éƒ¨å›­åŒºã€é”¦æ±ŸåŒºã€é’ç¾ŠåŒºã€é‡‘ç‰›åŒºã€æ­¦ä¾¯åŒºã€æˆååŒºã€é¾™æ³‰é©¿åŒºã€æ–°éƒ½åŒºã€æ¸©æ±ŸåŒºã€åŒæµåŒºã€éƒ«éƒ½åŒº\n\n\nDç±»\né’ç™½æ±ŸåŒºã€ç®€é˜³å¸‚ã€éƒ½æ±Ÿå °å¸‚ã€å½­å·å¸‚ã€é‚›å´ƒå¸‚ã€å´‡å·å¸‚ã€é‡‘å ‚å¿ã€æ–°æ´¥å¿ã€å¤§é‚‘å¿ã€æµ¦æ±Ÿå¿\n\n\n\n\nå…³ç³»è¯´æ˜å•çº¯çœ‹åªå…·å¤‡2å¹´ç¤¾ä¿æˆ–è€…2å¹´æˆ·å£çš„è¯ï¼šã€€ã€€1ã€Aåªèƒ½ä¹°Aã€Dã€€ã€€2ã€Båªèƒ½ä¹°Bã€Dã€€ã€€3ã€Aå’ŒBä¸èƒ½äº’ä¹°ã€€ã€€4ã€Cå¯ä»¥ä¹°Cã€Dï¼Œä¸èƒ½ä¹°Aæˆ–Bï¼ŒCåŒºåŸŸä¹‹é—´å¯ä»¥äº’ä¹°ã€‚ã€€ã€€5ã€Dä¹°Dï¼Œä¸èƒ½ä¹°Aã€Bã€Cï¼ŒDåŒºåŸŸä¹‹é—´å¯ä»¥äº’ä¹°ã€‚ã€€ã€€ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨å¦‚æœæŠŠæˆ·å£è¿åˆ°å¤©åºœæ–°åŒºï¼Œè€Œå·¥ä½œå•ä½åˆä¸åœ¨æˆéƒ½çš„è¯ã€‚æƒ³è¦ä¹°å¤©åºœæ–°åŒºçš„æˆ¿å­å°±åªæœ‰ç­‰ä¸¤å¹´åäº†ã€‚  æç¤ºï¼šABç±»åŒºåŸŸæ˜¯æœ€ä¸¥æ ¼çš„åŒºåŸŸï¼ä¸èƒ½ä¹°Cç±»ï¼Œä½†æ˜¯å¯ä»¥ä¹°Dç±»\nå¤©åºœæ–°åŒºï¼ˆAç±»åŒºåŸŸï¼‰æ»¡è¶³å…¶ä¸€å³å¯ã€€ã€€æ¡ä»¶ä¸€ï¼šæˆ·å£ä¹°æˆ¿ï¼šå¤©åºœæ–°åŒºæˆ·å£ã€€ã€€æ–°è½æˆ·äººç¾¤ï¼šé¢å¤–éœ€è¦12ä¸ªæœˆæˆéƒ½å¸‚ç¤¾ä¿ï¼ˆç¤¾ä¿å‚ä¿åœ°ä¸é™å®šåŒºåŸŸï¼Œä½†æ˜¯å·¥ä½œå•ä½æ³¨å†Œåœ°å¿…é¡»æ˜¯å¤©åºœæ–°åŒºï¼‰ä»¥åŠè¦æœ‰å·¥ä½œå•ä½ã€€ã€€éæ–°è½æˆ·äººç¾¤ï¼šæœ‰å¤©åºœæ–°åŒºæˆ·å£å°±è¡Œã€‚\nã€€ã€€æ¡ä»¶äºŒï¼šç¤¾ä¿ä¹°æˆ¿ï¼šåœ¨æ²¡æœ‰æˆ·å£çš„æƒ…å½¢ä¸‹ï¼Œéœ€è¦è¿ç»­24ä¸ªæœˆå•ä½ç¤¾ä¿ï¼ˆè´­æˆ¿æ—¶å•ä½æ³¨å†Œåœ°è¦åœ¨å¤©åºœæ–°åŒºï¼‰ã€€ã€€å‰æï¼šä¸¤äººåŠä»¥ä¸Šæœ¬å¸‚æˆ·ç±å±…æ°‘å®¶åº­åœ¨å…¨å¸‚èŒƒå›´å†…æ— è‡ªæœ‰äº§æƒä½æˆ¿æˆ–åªæ‹¥æœ‰1å¥—è‡ªæœ‰äº§æƒä½æˆ¿ï¼Œæˆ–æœ¬å¸‚æˆ·ç±æˆå¹´å•èº«å±…æ°‘å®¶åº­ã€éæœ¬å¸‚æˆ·ç±å±…æ°‘å®¶åº­åœ¨å…¨å¸‚èŒƒå›´å†…æ— è‡ªæœ‰äº§æƒä½æˆ¿ã€‚\né«˜æ–°å—åŒºï¼ˆBç±»åŒºåŸŸï¼‰æ»¡è¶³å…¶ä¸€å³å¯ã€€ã€€æ¡ä»¶ä¸€ï¼šæˆ·å£ä¹°æˆ¿ï¼šé«˜æ–°å—åŒºæˆ·å£ã€€ã€€æ–°è½æˆ·äººç¾¤ï¼šé¢å¤–éœ€è¦12ä¸ªæœˆæˆéƒ½å¸‚ç¤¾ä¿ï¼ˆç¤¾ä¿å‚ä¿åœ°ä¸é™å®šåŒºåŸŸï¼Œä½†æ˜¯å·¥ä½œå•ä½æ³¨å†Œåœ°å¿…é¡»æ˜¯é«˜æ–°å—ï¼‰ä»¥åŠè¦æœ‰å·¥ä½œå•ä½ã€€ã€€éæ–°è½æˆ·äººç¾¤ï¼ˆæŒ‡æœ‰2å¹´ä»¥ä¸Šæˆ·å£ï¼‰ï¼šæœ‰é«˜æ–°å—åŒºæˆ·å£å°±è¡Œã€‚\nã€€ã€€æ¡ä»¶äºŒï¼šç¤¾ä¿ä¹°æˆ¿ï¼šåœ¨æ²¡æœ‰æˆ·å£çš„æƒ…å½¢ä¸‹ï¼Œéœ€è¦è¿ç»­24ä¸ªæœˆå•ä½ç¤¾ä¿ï¼ˆè´­æˆ¿æ—¶å•ä½æ³¨å†Œåœ°è¦åœ¨é«˜æ–°å—åŒºï¼‰ã€€ã€€å‰æï¼šä¸¤äººåŠä»¥ä¸Šæœ¬å¸‚æˆ·ç±å±…æ°‘å®¶åº­åœ¨å…¨å¸‚èŒƒå›´å†…æ— è‡ªæœ‰äº§æƒä½æˆ¿æˆ–åªæ‹¥æœ‰1å¥—è‡ªæœ‰äº§æƒä½æˆ¿ï¼Œæˆ–æœ¬å¸‚æˆ·ç±æˆå¹´å•èº«å±…æ°‘å®¶åº­ã€éæœ¬å¸‚æˆ·ç±å±…æ°‘å®¶åº­åœ¨å…¨å¸‚èŒƒå›´å†…æ— è‡ªæœ‰äº§æƒä½æˆ¿ã€‚\né«˜æ–°è¥¿åŒºä¸ºä»£è¡¨ï¼ˆCç±»åŒºåŸŸï¼‰ã€€ã€€æ¡ä»¶ä¸€ï¼šæˆ·å£ä¹°æˆ¿ï¼šCç±»åŒºåŸŸæˆ·å£å¯ä»¥ã€€ã€€æ–°è½æˆ·äººç¾¤ï¼šé¢å¤–éœ€è¦12ä¸ªæœˆä»¥ä¸Šæˆéƒ½ç¤¾ä¿ï¼ˆå•ä½æ³¨å†Œåœ°11åŒºåŸŸå°±è¡Œï¼Œä¸åŒåŒºåŸŸé—´ç¤¾ä¿æ—¶é—´å¯ä»¥å åŠ ï¼‰ä»¥åŠè¦æœ‰å·¥ä½œå•ä½\nã€€ã€€éæ–°è½æˆ·äººç¾¤ï¼šæœ‰Cç±»åŒºåŸŸæˆ·å£ã€€ã€€æ¡ä»¶äºŒï¼šç¤¾ä¿ä¹°æˆ¿ï¼šåœ¨æ²¡æœ‰æˆ·å£çš„æƒ…å½¢ä¸‹ï¼Œéœ€è¦Cç±»åŒºåŸŸè¿ç»­24ä¸ªæœˆå•ä½ç¤¾ä¿ï¼ˆè´­æˆ¿æ—¶å•ä½æ³¨å†Œåœ°è¦åœ¨Cç±»åŒºåŸŸï¼‰ï¼Œæ³¨æ„Dç±»åŒºåŸŸæˆ·å£çš„äººï¼Œæœ‰Cç±»åŒºåŸŸ24ä¸ªæœˆå•ä½ç¤¾ä¿ä¹Ÿå¯ä»¥ä¹°\nã€€ã€€å‰æï¼šä¸¤äººåŠä»¥ä¸Šæœ¬å¸‚æˆ·ç±å±…æ°‘å®¶åº­åœ¨å…¨å¸‚èŒƒå›´å†…æ— è‡ªæœ‰äº§æƒä½æˆ¿æˆ–åªæ‹¥æœ‰1å¥—è‡ªæœ‰äº§æƒä½æˆ¿ï¼Œæˆ–æœ¬å¸‚æˆ·ç±æˆå¹´å•èº«å±…æ°‘å®¶åº­ã€éæœ¬å¸‚æˆ·ç±å±…æ°‘å®¶åº­åœ¨å…¨å¸‚èŒƒå›´å†…æ— è‡ªæœ‰äº§æƒä½æˆ¿ã€‚\né’ç™½æ±ŸåŒºä¸ºä»£è¡¨ï¼ˆDç±»åŒºåŸŸï¼‰ã€€ã€€æ¡ä»¶ä¸€ï¼šã€€ã€€æˆ·å£ä¹°æˆ¿ï¼šä»»æ„åŒºåŸŸæˆ·å£éƒ½è¡Œã€€ã€€ç¤¾ä¿ä¹°æˆ¿ï¼šä»»æ„åŒºåŸŸè¿ç»­12ä¸ªæœˆå•ä½ç¤¾ä¿\n","categories":["æ¯æ—¥ä¸€è®°"],"tags":["è´­æˆ¿"]},{"title":"Linuxæ—¥å¿—æŸ¥è¯¢å‘½ä»¤journalctlä½¿ç”¨æ‰‹å†Œ","url":"/2023/05/10/linux-journalctl/","content":"å¯¹äºé‡‡ç”¨systemdç®¡ç†æœåŠ¡çš„ç³»ç»Ÿä¸‹ï¼Œé»˜è®¤å­˜åœ¨systemd-journaldæ—¥å¿—æœåŠ¡ï¼Œå¹¶æä¾›äº†journalctlå‘½ä»¤æŸ¥è¯¢è®°å½•çš„æ—¥å¿—ä¿¡æ¯ã€‚\n\n\nå¸¸ç”¨å‘½ä»¤\næŸ¥è¯¢æ‰€æœ‰æ—¥å¿—ï¼šjournalctl\næŸ¥è¯¢å†…æ ¸æ—¥å¿—ï¼šjournalctl -k\næŸ¥è¯¢å¯åŠ¨æ—¥å¿—ï¼šjournalctl -b\næŸ¥è¯¢æœ€è¿‘20æ¡æ—¥å¿—ï¼šjournalctl -n 20\næŸ¥è¯¢å¹¶è·Ÿè¸ªæ—¥å¿—ï¼šjournalctl -f\næŸ¥è¯¢å†²çªã€å‘Šè­¦ã€é”™è¯¯æ—¥å¿—ï¼šjournalctl -p err..alert\næŸ¥è¯¢åˆ¶å®šæœåŠ¡æ—¥å¿—ï¼šjournalctl -u caddy.service -u nginx.service\næŸ¥è¯¢æŒ‡å®šè¿›ç¨‹æ—¥å¿—ï¼šjournalctl _PID=725\n\næ ¹æ®æ—¶é—´æŸ¥è¯¢å‘½ä»¤\næŸ¥è¯¢20åˆ†é’Ÿå‰çš„æ—¥å¿—ï¼šjournalctl --since &quot;20 min ago&quot;\næŸ¥è¯¢ä»Šå¤©çš„æ—¥å¿—ï¼šjournalctl --since today\næŸ¥è¯¢æŒ‡å®šæ—¥æœŸçš„æ—¥å¿—ï¼šjournalctl --until 2023-05-01\n\n","categories":["æ¯æ—¥ä¸€è®°"],"tags":["linux"]},{"title":"è§£å†³Macé»˜è®¤vimæ— æ³•ä½¿ç”¨å‰ªè´´æ¿é—®é¢˜","url":"/2020/04/05/mac-vim/","content":"å¼€ç¯‡macç³»ç»Ÿè‡ªå¸¦çš„vimå±äºé˜‰å‰²ç‰ˆï¼Œä¸æ”¯æŒä¸€äº›åŠŸèƒ½ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨ç¼–è¯‘æ›¿æ¢ã€‚æŸ¥çœ‹é»˜è®¤vimç‰ˆæœ¬åŠå·²å¯ç”¨åŠŸèƒ½ï¼š\nvim --version\nè¾“å‡ºåŠŸèƒ½å‰é¢å¸¦ç¬¦å·+è¡¨ç¤ºå·²å¯ç”¨è¯¥åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼šè¾“å‡ºåŒ…å«+clipboardè¡¨ç¤ºæ”¯æŒå‰ªè´´æ¿å¤åˆ¶åŠŸèƒ½ï¼Œå¦åˆ™ä¸æ”¯æŒã€‚\n\næºç ç¼–è¯‘\nä¸‹è½½æºç æºç åœ°å€ï¼šhttps://github.com/vim/vim/releases\ncurl -LJO https://github.com/vim/vim/archive/v8.2.0352.tar.gz\t#ä¸‹è½½tar -zxvf vim-8.2.0352.tar.gz\t#è§£å‹\n\nè®¾ç½®ç¼–è¯‘å‚æ•°éœ€è¦æ”¯æŒçš„åŠŸèƒ½å°±åœ¨æ­¤å¤„è®¾ç½®\n./configure --with-features=huge --enable-pythoninterp=yes  --enable-cscope --enable-fontset --enable-perlinterp --enable-rubyinterp --with-python-config-dir=/usr/lib/python2.7/config --prefix=/usr/local\n\né»˜è®¤å·²å¯ç”¨å‰ªè´´æ¿å¤åˆ¶åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸ç”¨è®¾ç½®\n\n\nç¼–è¯‘å’Œå®‰è£…\nmake &amp;&amp; make install\n\næ›¿æ¢é»˜è®¤vim\necho &quot;alias vim=&#x27;/usr/local/bin/vim&#x27;&quot; &gt;&gt; ~/.zshrc #é»˜è®¤æ–‡ä»¶ä¸º.bash_profilesource ~/.zshrc\n\n","categories":["æ¯æ—¥ä¸€è®°"],"tags":["Mac OS","Vim"]},{"title":".NET Core CLIå‘½ä»¤","url":"/2020/04/05/netcore-cli/","content":"Consoledotnet [command] [arguments] [--additional-deps] [--additionalprobingpath] [--depsfile]    [-d|--diagnostics] [--fx-version] [-h|--help] [--info] [--roll-forward-on-no-candidate-fx]    [--runtimeconfig] [-v|--verbosity] [--version]\n\næŸ¥çœ‹å¯ç”¨æ¨¡ç‰ˆï¼š\ndotnet new -l\n\nä¾‹å¦‚åˆ›å»ºä¸€ä¸ªMVCæ¨¡ç‰ˆçš„é¡¹ç›®ï¼š\ndotnet new mvc -lang c# -o my_web\n\ndotnetå‘½ä»¤å¸¸è§„\n\n\nå‘½ä»¤\nè¯´æ˜\n\n\n\ndotnet build\nç”Ÿæˆ .NET Core åº”ç”¨ç¨‹åºã€‚\n\n\ndotnet clean\næ¸…é™¤ç”Ÿæˆè¾“å‡ºã€‚\n\n\ndotnet help\næ˜¾ç¤ºå‘½ä»¤æ›´è¯¦ç»†çš„åœ¨çº¿æ–‡æ¡£ã€‚\n\n\ndotnet migrate\nå°†æœ‰æ•ˆçš„é¢„è§ˆç‰ˆ 2 é¡¹ç›®è¿ç§»åˆ° .NET Core SDK 1.0 é¡¹ç›®ã€‚\n\n\ndotnet msbuild\næä¾›å¯¹ MSBuild å‘½ä»¤è¡Œçš„è®¿é—®æƒé™ã€‚\n\n\ndotnet new\nä¸ºç»™å®šçš„æ¨¡æ¿åˆå§‹åŒ– C# æˆ– F# é¡¹ç›®\n\n\ndotnet pack\nåˆ›å»ºä»£ç çš„ NuGet åŒ…ã€‚\n\n\ndotnet publish\nåˆ›å»ºä»£ç çš„ NuGet åŒ…ã€‚\n\n\ndotnet restore\nè¿˜åŸç»™å®šåº”ç”¨ç¨‹åºçš„ä¾èµ–é¡¹ã€‚\n\n\ndotnet run\nä»æºè¿è¡Œåº”ç”¨ç¨‹åºã€‚\n\n\ndotnet sln\nç”¨äºæ·»åŠ ã€åˆ é™¤å’Œåˆ—å‡ºè§£å†³æ–¹æ¡ˆæ–‡ä»¶ä¸­é¡¹ç›®çš„é€‰é¡¹ã€‚\n\n\ndotnet store\nå°†ç¨‹åºé›†å­˜å‚¨åˆ°è¿è¡Œæ—¶åŒ…å­˜å‚¨åŒºã€‚\n\n\ndotnet test\nå°†ç¨‹åºé›†å­˜å‚¨åˆ°è¿è¡Œæ—¶åŒ…å­˜å‚¨åŒºã€‚\n\n\né¡¹ç›®å¼•ç”¨\n\n\nå‘½ä»¤\nè¯´æ˜\n\n\n\ndotnet add reference\næ·»åŠ é¡¹ç›®å¼•ç”¨\n\n\ndotnet list reference\nåˆ—å‡ºé¡¹ç›®å¼•ç”¨\n\n\ndotnet remove reference\nåˆ é™¤é¡¹ç›®å¼•ç”¨\n\n\nNuGet åŒ…\n\n\nå‘½ä»¤\nè¯´æ˜\n\n\n\ndotnet add package\næ·»åŠ NuGetåŒ…\n\n\ndotnet remove package\nåˆ é™¤NuGetåŒ…\n\n\nNuGet å‘½ä»¤\n\n\nå‘½ä»¤\nè¯´æ˜\n\n\n\ndotnet nuget delete\nä»æœåŠ¡å™¨åˆ é™¤æˆ–å–æ¶ˆåˆ—å‡ºåŒ…\n\n\ndotnet nuget locals\næ¸…é™¤æˆ–åˆ—å‡ºæœ¬åœ° NuGet èµ„æº\n\n\ndotnet nuget push\nå°†åŒ…æ¨é€åˆ°æœåŠ¡å™¨ï¼Œå¹¶å°†å…¶å‘å¸ƒ\n\n\nå…¨å±€å·¥å…·å‘½ä»¤\n\n\nå‘½ä»¤\nè¯´æ˜\n\n\n\ndotnet tool install\nåœ¨è®¡ç®—æœºä¸Šå®‰è£…å…¨å±€å·¥å…·\n\n\ndotnet tool list\nåˆ—å‡ºå½“å‰å®‰è£…åœ¨è®¡ç®—æœºä¸Šçš„é»˜è®¤ç›®å½•ä¸­æˆ–æŒ‡å®šè·¯å¾„ä¸­çš„æ‰€æœ‰å…¨å±€å·¥å…·ã€‚\n\n\ndotnet tool uninstall\nä»è®¡ç®—æœºä¸­å¸è½½å…¨å±€å·¥å…·\n\n\ndotnet tool update\nåœ¨è®¡ç®—æœºä¸Šæ›´æ–°å…¨å±€å·¥å…·\n\n\n","categories":["C#",".NET Core"],"tags":["CLI"]},{"title":"ä¼˜é›…çš„Pythonä»£ç å°±è¯¥è¿™æ ·å†™","url":"/2020/04/05/pythonic/","content":"ç®€è¿°Pythonæœ¬å°±æ˜¯å¾ˆé«˜æ•ˆçš„å¼€å‘è¯­è¨€ï¼Œç›¸æ¯”å…¶ä»–è¯­è¨€è€Œè¨€å·²ç»å¾ˆç®€æ´æ˜äº†ã€‚ä½†åœ¨å®é™…çš„ç¼–å†™ä¸­ï¼Œå¾€å¾€ä¼šå¿½ç•¥è¿™ä¸€ç‚¹ï¼Œæœ¬è¯¥ç”¨å¾ˆç®€æ´é«˜æ•ˆçš„å†™æ³•å®ç°ï¼Œä¸ä»…èƒ½å¤Ÿä¸ºæˆ‘ä»¬çœå»ç¹é‡çš„ç¼–å†™å·¥ä½œé‡ï¼Œæ›´èƒ½åˆ©äºåæœŸä»£ç çš„å¯é˜…è¯»æ€§å’Œç»´æŠ¤ã€‚è¿™é‡Œå°±åˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„ç®€æ´é«˜æ•ˆçš„å†™æ³•ï¼Œåä¾‹å°±ä¸åœ¨è¿™é‡Œåˆ—ä¸¾ã€‚\n\nPythonic1.å˜é‡äº¤æ¢\na = 1b = 2a, b = b, aprint(&#x27;a:%d, b:%d&#x27; % (a, b))\næ‰“å°è¾“å‡ºï¼š\n\na:2, b:1\n\n2.å¯è¿­ä»£å¯¹è±¡\nfor i in range(3):\tprint(i)\næ‰“å°è¾“å‡ºï¼š\n\n012\n\nrangeæ˜¯python3çš„å†™æ³•ï¼Œåœ¨python2ä¸­ä½¿ç”¨çš„æ˜¯xrange\n3.å¸¦ç´¢å¼•éå†\narr = [1, 3, 5, 7, 9]for i, num in enumerate(arr):\tprint(&#x27;index:%d, value:%d&#x27; % (i, num))\næ‰“å°è¾“å‡ºï¼š\n\nindex:0, value:1index:1, value:3index:2, value:5index:3, value:7index:4, value:9\n\n4.åˆ—è¡¨æ¨å¯¼\narr = [i for i in range(10) if i % 2 == 0]print(arr)\næ‰“å°è¾“å‡ºï¼š\n\n[0, 2, 4, 6, 8]\n\n5.å­—ç¬¦ä¸²æ‹¼æ¥\nnames = [&#x27;å¼ ä¸‰&#x27;, &#x27;æå››&#x27;, &#x27;ç‹äº”&#x27;]print(&#x27;,&#x27;.join(names))\næ‰“å°è¾“å‡º\n\nå¼ ä¸‰,æå››,ç‹äº”\n\n6.zipåˆ›å»ºé”®å€¼å¯¹\nkeys = [&#x27;name&#x27;, &#x27;sex&#x27;, &#x27;age&#x27;]values = [&#x27;tim&#x27;, &#x27;male&#x27;, 23]user = dict(zip(keys, values))print(user)\næ‰“å°è¾“å‡ºï¼š\n\n{â€˜nameâ€™: â€˜timâ€™, â€˜sexâ€™: â€˜maleâ€™, â€˜ageâ€™: 23}\n\n7.éå†å­—å…¸keyå’Œvalue\nuser = &#123;&#x27;name&#x27;: &#x27;tim&#x27;, &#x27;sex&#x27;: &#x27;male&#x27;, &#x27;age&#x27;: 23&#125;for key, value in user.items():\tprint(&#x27;%s = %s&#x27; % (key, value))\næ‰“å°è¾“å‡ºï¼š\n\nname &#x3D; timsex &#x3D; maleage &#x3D; 23\n\n8.æœ‰æ•ˆå€¼åˆ¤æ–­\nname = &#x27;this blog&#x27;langs = [&#x27;zh&#x27;, &#x27;en&#x27;, &#x27;jp&#x27;]user = &#123;&#x27;name&#x27;: &#x27;tim&#x27;, &#x27;sex&#x27;: &#x27;male&#x27;, &#x27;age&#x27;: 23&#125;if name and langs and user:\tprint(&#x27;True&#x27;)\nç©ºå­—ç¬¦ä¸²ã€ç©ºåˆ—è¡¨ã€ç©ºå­—å…¸éƒ½ä¼šè¿”å›Falseæ‰“å°è¾“å‡ºï¼š\n\nTrue\n\n9.ä¸‰å…ƒè¿ç®—\n# ç¬¬ä¸€ç§å†™æ³•a = 5b = 1 if a &gt; 0 else 0print(&#x27;b =&#x27;, b)# ç¬¬äºŒç§å†™æ³•c = (0, a)[a &gt; 0]print(&#x27;c = &#x27;, c)\nç¬¬äºŒç§æ˜¯æ¯”è¾ƒæ™¦æ¶©çš„å†™æ³•ï¼Œå…¶å®åˆ©ç”¨çš„å°±æ˜¯é€»è¾‘è¿ç®—ç»“æœçœŸæˆ–å‡ï¼Œç¨‹åºæœ¬èº«è§£é‡Šä¾¿æ˜¯1æˆ–0ï¼Œç„¶åæŒ‰ç…§ç´¢å¼•å–å¯¹åº”çš„å€¼æ‰“å°è¾“å‡ºï¼š\n\nb &#x3D; 1c &#x3D;  5\n\n10.æ‰“å¼€æ–‡ä»¶ä½¿ç”¨withæ‰“å¼€æ–‡ä»¶æ“ä½œå®Œæˆåä¼šè‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨å…³é—­ã€‚\nwith open(&#x27;test.txt&#x27;) as f:\tprint(f.read())\n","categories":["Python"],"tags":["Pythonic"]},{"title":"RabbitMQ Delayed Message","url":"/2020/04/05/rbmq-delayed-msg/","content":"åˆ©ç”¨è‡ªèº«æ­»ä¿¡é˜Ÿåˆ—ç‰¹æ€§   è®¾ç½®é˜Ÿåˆ—ï¼ˆ Queue TTLï¼‰æˆ–æ¶ˆæ¯ï¼ˆPer-Message TTLï¼‰æ—¶ï¼Œå½“æ¶ˆæ¯åˆ°è¾¾é˜Ÿåˆ—ååœ¨TTLè§„åˆ™æŒ‡å®šæ—¶é—´å†…æœªè¢«æ¶ˆè´¹æ—¶ä¼šæˆä¸ºæ­»ä¿¡ï¼Œåˆ©ç”¨DLXç‰¹æ€§å½“æ¶ˆæ¯åˆ°è¾¾æ­»äº¡æ—¶é—´ä¸”å¤„äºé˜Ÿå¤´æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…¶é‡æ–°è½¬å‘åˆ°å¦ä¸€ä¸ªExchangeæˆ–Routing Keyï¼Œå°†å…¶è·¯ç”±åˆ°æŒ‡å®šå¤„ç†é˜Ÿåˆ—ä»¥è¾¾åˆ°å»¶è¿Ÿçš„ç›®çš„ã€‚\n\n   å®ç°æ­¥éª¤ï¼š\n\nåˆ›å»ºäº¤æ¢æœºï¼ˆExchangeï¼‰\nè®¾ç½®äº¤æ¢æœºåç§°ä¸ºdelayï¼Œæ­¤åç§°å¯è‡ªå®šä¹‰ï¼Œåé¢å‚æ•°å€¼ä¸æ­¤å¯¹åº”ã€‚\n\nåˆ›å»ºæ­»ä¿¡é˜Ÿåˆ—\nè®¾ç½®é˜Ÿåˆ—å‚æ•°\n&#123;        &quot;x-queue-type&quot;: &quot;classic&quot;,        &quot;x-dead-letter-exchange&quot;: &quot;delay&quot;,\t// æ­»ä¿¡äº¤æ¢æœº     &quot;x-dead-letter-routing-key&quot;: &quot;delay_key&quot;,\t// æ­»ä¿¡è·¯ç”±Key&#125;\n\n  ç»‘å®šæ­¤é˜Ÿåˆ—åˆ°delayäº¤æ¢æœºï¼Œè®¾ç½®è·¯ç”±routing keyä¸ºdelayã€‚\n\nåˆ›å»ºå¤„ç†é˜Ÿåˆ—\n åˆ›å»ºæ­»ä¿¡å¤„ç†é˜Ÿåˆ—ï¼Œç”¨äºæ­»ä¿¡æ¶ˆè´¹ã€‚\n ç»‘å®šæ¬¡é˜Ÿåˆ—åˆ°delayäº¤æ¢æœºï¼Œè®¾ç½®è·¯ç”±routing keyä¸ºdelay-keyã€‚\n\nç”Ÿäº§æ­»ä¿¡å»¶è¿Ÿæ¶ˆæ¯\nå»¶è¿Ÿæ¶ˆæ¯å‚æ•°æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è®¾ç½®é˜Ÿçš„æœ‰æ•ˆæœŸå‚æ•°x-expiresï¼Œå¦ä¸€ç§æ˜¯é’ˆå¯¹æ¶ˆæ¯è®¾ç½®ç”Ÿå­˜æ—¶é—´x-message-ttlã€‚\nå»¶è¿Ÿæ—¶é—´å•ä½ millisecond\nç¬¬ä¸€ç§ï¼š\nchannel.basic_publish(    exchange=&quot;delay&quot;,    routing_key=&quot;delay&quot;,    body=&quot;[%s]Send message: Hello World!&quot;    % time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()),    properties=pika.BasicProperties(delivery_mode=2, expiration=&quot;3000&quot;),)\n\nç¬¬äºŒç§ï¼š\nchannel.basic_publish(        exchange=&quot;delayed_exchange&quot;,        routing_key=&quot;delayed-key&quot;,        body=&quot;[%s]Send message: Hello World!&quot;        % time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()),        properties=pika.BasicProperties(delivery_mode=2, headers=&#123;&quot;x-message-ttl&quot;: &quot;3000&quot;&#125;),    )\t\t\n\nç¼ºé™·é—®é¢˜ï¼š\nâ€‹\t\tç”±äºæ¶ˆæ¯é˜Ÿåˆ—çš„å…ˆè¿›å…ˆå‡ºåŸåˆ™ï¼Œè¯¥æ–¹æ³•åœ¨æ¶ˆæ¯ä¸åŒç”Ÿå­˜æ—¶é—´åˆ»åº¦çš„æƒ…å†µä¸‹æ— æ³•ä¿è¯å‡†ç¡®çš„åŠæ—¶è½¬å‘åˆ°æ­»ä¿¡å¤„ç†é˜Ÿåˆ—ï¼Œå½“ç”Ÿå­˜æ—¶é—´é•¿çš„æ¶ˆæ¯åˆ°è¾¾è¯¥é˜Ÿåˆ—åï¼Œåé¢ç”Ÿå­˜æ—¶é—´çŸ­çš„æ¶ˆæ¯åˆ°è¾¾è¯¥é˜Ÿåˆ—æ—¶ä¼šè¢«ç”Ÿå­˜æ—¶é—´é•¿çš„æ¶ˆæ¯é˜»å¡ï¼Œä½¿å…¶åœ¨åˆ°è¾¾å¤±æ•ˆæ—¶é—´æ—¶æ— æ³•åŠæ—¶å‡ºé˜Ÿã€‚\nåˆ°è¾¾æ­»äº¡æ—¶é—´ä¸”å¤„äºé˜Ÿå¤´ã€‚\n\n\nä½¿ç”¨å»¶è¿Ÿæ¶ˆæ¯æ’ä»¶   ä½¿ç”¨å»¶è¿Ÿæ¶ˆæ¯æ‰©å±•æ’ä»¶ï¼šrabbitmq-delayed-message-exchangeï¼Œè¯¥æ‰©å±•æ’ä»¶èƒ½å¤Ÿé’ˆå¯¹ä¸åŒç”Ÿå­˜æ—¶é—´åˆ»åº¦çš„æ¶ˆæ¯è¿›è¡Œæ’åºï¼Œä»¥ä¿è¯ç”Ÿå­˜æ—¶é—´çŸ­çš„æ¶ˆæ¯èƒ½å¤ŸåŠæ—¶è¾¾åˆ°é˜Ÿå¤´è¿›è¡Œå‡ºé˜Ÿã€‚\n   ä½¿ç”¨æ­¥éª¤ï¼š\n\nå®‰è£…æ‰©å±•æ’ä»¶\nä¸‹è½½ï¼ˆCommunity Pluginsï¼‰è¯¥æ‰©å±•æ–‡ä»¶å°†å…¶æ”¾ç½®RabbitMQæ‰©å±•ç›®å½•ã€‚\nå¯ç”¨æ‰©å±•æ’ä»¶ï¼š\nrabbitmq-plugins enable rabbitmq_delayed_message_exchange\n\né…ç½®å»¶è¿Ÿæ¶ˆæ¯ç±»å‹äº¤æ¢æœº\nåˆ›å»ºäº¤æ¢æœºæ—¶é€‰æ‹©ç±»å‹ä¸ºï¼šx-delayed-messageï¼Œè®¾ç½®å‚æ•°x-delayed-typeä¸ºdirectï¼Œç»‘å®šæ¶ˆæ¯å¤„ç†é˜Ÿåˆ—å³å¯ã€‚\n\nç”Ÿäº§å»¶è¿Ÿæ¶ˆæ¯\nè®¾ç½®æ¶ˆæ¯ç”Ÿå­˜æ—¶é—´å‚æ•°x-delayï¼Œå•ä½æ¯«ç§’ã€‚\nchannel.basic_publish(        exchange=&quot;delayed_exchange&quot;,        routing_key=&quot;delayed-key&quot;,        body=&quot;[%s]Send message: Hello World!&quot;        % time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()),        properties=pika.BasicProperties(delivery_mode=2, headers=&#123;&quot;x-delay&quot;: &quot;3000&quot;&#125;),    )\n\nä¸åŒæ—¶é—´åˆ»åº¦çš„æ¶ˆæ¯èƒ½å¤Ÿåœ¨å…¶å¤±æ•ˆæ—¶åŠæ—¶å‡ºé˜Ÿã€‚\n\n\n","categories":["æ¯æ—¥ä¸€è®°"],"tags":["MQ","æ¶ˆæ¯é˜Ÿåˆ—"]},{"title":"This Blog README","url":"/2020/04/05/readme/","content":"ä»‹ç»æœ¬é¡¹ç›®æ˜¯ä½¿ç”¨Pythonè¯­è¨€å¼€å‘çš„Blogç½‘ç«™ã€‚åç«¯ä½¿ç”¨çš„æ˜¯Djangoæ¡†æ¶ï¼Œå‰æ®µä½¿ç”¨çš„æ˜¯Foundation JavaScriptåº“ã€‚ä»“åº“åœ°å€ï¼šhttps://github.com/WsWHL/blog\n\nç¯å¢ƒ\nå¼€å‘å·¥å…·ï¼švs code\næ•°æ®åº“ï¼šmy sql\nç¼“å­˜ï¼šredis\nä»£ç†ï¼šnginx\nPython &gt;&#x3D; 3.7.2Django &gt;&#x3D; 2.1.6Foundation &gt;&#x3D; 6.5\n\n\n\nå¼€å‘export SECRET_KEY=******python manage.py runserver 8000\n\nå¼€å‘å·¥å…·vs codeè¿è¡Œæ—¶ä¼šè‡ªåŠ¨è¯»å–æ ¹ç›®å½•ä¸‹çš„.envç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­é…ç½®äº†å¿…è¦çš„ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œä¸é…ç½®ä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒSECRET_KEYåªä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®ï¼Œè¯¥é…ç½®ç”Ÿæˆæ–¹å¼å¯å‚é˜…Djangoå®˜æ–¹æ–‡æ¡£ã€‚\n\néƒ¨ç½²\nç³»ç»Ÿï¼šcentos\næœåŠ¡ï¼šwsgi\nä»£ç†ï¼šnginx\nå®¹å™¨ï¼šdocker\n\nç¼–è¯‘é•œåƒæ„å»ºå·¥å…·docker-compose\ndocker-compose build\nå¯åŠ¨å®¹å™¨docker-compose up -ddocker-compose top # æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨çŠ¶æ€\n\n-d å°†è¿›ç¨‹æ”¾å…¥åå°æ‰§è¡Œ\n\n\né»˜è®¤é…ç½®äº†sslè¯ä¹¦ï¼Œç›¸å…³é…ç½®å‚è§æ ¹ç›®å½•ä¸‹çš„nginxæ–‡ä»¶å¤¹ä¸­çš„nginx.confé…ç½®æ–‡ä»¶ã€‚\n\n","categories":["Deploy"],"tags":["Blog","README"]},{"title":"å¸¸ç”¨æ’åºç®—æ³•é”¦é›†","url":"/2020/04/05/sorts/","content":"éšæœºæ•°ç»„ä½¿ç”¨numpyç”Ÿæˆä¸€ç»´éšæœºæ•°ç»„ã€‚\nfrom numpy import randomprint(random.randint(100, size=20))\nè¾“å‡ºï¼š\n\n[96 53 14 44 39  0 93  2 59 69 22 56 44 81 98  6 93 81 42 34]\n\n\nå†’æ³¡æ’åºå†’æ³¡æ’åºæ˜¯æŒ‡ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œä¾æ¬¡ä¸åé¢çš„å…ƒç´ æ¯”è¾ƒï¼Œå¦‚æœæ¯”å…¶å¤§å°±è¿›è¡Œäº¤æ¢ã€‚ç›´åˆ°æ¯ä¸ªå…ƒç´ éå†æ¯”è¾ƒå®Œæˆä¸ºæ­¢ã€‚\nç®—æ³•ï¼š\ndef sort(arrs):    &quot;&quot;&quot;å†’æ³¡æ’åº&quot;&quot;&quot;    length = len(arrs)    if length == 0 or length &lt; 2:        return arrs        for i in range(length):        for j in range(i + 1, length):            if(arrs[i] &gt; arrs[j]):                arrs[i], arrs[j] = arrs[j], arrs[i]\t\t\t\t    return arrs\n\né€‰æ‹©æ’åºé€‰æ‹©æ’åºæ˜¯æŒ‡å‡è®¾ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæœ€å°ï¼Œä¾æ¬¡ä¸åé¢å…ƒç´ æ¯”è¾ƒï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°å€¼çš„ç´¢å¼•ï¼Œç„¶åä¸å…¶è¿›è¡Œäº¤æ¢ã€‚ç›´åˆ°æ¯ä¸ªå…ƒç´ éå†æ¯”è¾ƒå®Œæˆä¸ºæ­¢ã€‚\nç®—æ³•ï¼š\ndef sort(arrs):    &quot;&quot;&quot;é€‰æ‹©æ’åº&quot;&quot;&quot;    if arrs is None or len(arrs) &lt; 2:        return arrs        for i, num in enumerate(arrs):        min = i        for j in range(i + 1, len(arrs)):            if arrs[j] &lt; arrs[min]:                min = j        if min != i and arrs[min] &lt; num:            arrs[i], arrs[min] = arrs[min], arrs[i]                return arrs\n\næ’å…¥æ’åºæ’å…¥æ’åºæ˜¯æŒ‡ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ï¼Œä¾æ¬¡ä¸å…¶å‰é¢çš„å…ƒç´ ï¼Œä»å³åˆ°å·¦é¡ºåºæ¯”è¾ƒï¼Œå¦‚æœæ¯”å…¶å¤§åˆ™æ’å…¥åˆ°å¯¹åº”å…ƒç´ å‰é¢å»ï¼Œäº¤æ¢å¯¹åº”ç´¢å¼•ç»§ç»­ä¸å‰é¢å…ƒç´ ä»¥æ­¤æ¯”è¾ƒã€‚\nç®—æ³•ï¼š\ndef sort(arrs):    &quot;&quot;&quot;æ’å…¥æ’åº&quot;&quot;&quot;    if arrs is None or len(arrs) &lt;= 0:        return []        for i in range(1, len(arrs)):        for j in reversed(range(i)):            if arrs[i] &lt; arrs[j]:                arrs[i], arrs[j] = arrs[j], arrs[i]                i = j        return arrs\n\n\nä¸åŒç®—æ³•ä¹‹é—´ç”±äºå…¶æ—¶é—´å¤æ‚åº¦ä¸åŒï¼Œå…¶æ€§èƒ½ä¹Ÿæœ‰æ‰€å·®å¼‚ã€‚\n\n","categories":["ç®—æ³•"],"tags":["sort"]},{"title":"Kubernetes This Blog","url":"/2020/04/05/thisblog-k8s/","content":"é›†ç¾¤éƒ¨ç½²ç¯å¢ƒè¯´æ˜æœ¬æ–‡é‡‡ç”¨gcpäº‘æœåŠ¡éƒ¨ç½²æ–¹æ¡ˆï¼Œ1 ä¸ª vCPUï¼Œ3.75 GBï¼Œå•èŠ‚ç‚¹éƒ¨ç½²ã€‚\n\næ‰€éœ€éƒ¨ç½²æœåŠ¡è¯´æ˜\nmysql, æœ‰çŠ¶æ€æœåŠ¡ï¼Œç”¨äºæ•°æ®æŒä¹…åŒ–å­˜å‚¨\nredisï¼Œä¸»è¦ç”¨äºæ–‡ç« æ•°æ®ç¼“å­˜ï¼Œä»¥æ­¤æå‡ç½‘ç«™å“åº”é€Ÿåº¦\nnginx, ç”¨äºç½‘ç«™ä¸­é™æ€æ–‡ä»¶å‘å¸ƒæœåŠ¡å™¨ï¼Œä¸åç«¯æœåŠ¡ç«™ç‚¹åˆ†ç¦»ä»¥æ­¤è¾¾åˆ°åˆ†æµæ•ˆæœ\nweb, åç«¯ç«™ç‚¹å‘å¸ƒæœåŠ¡\ningress controller, è·¯ç”±æ§åˆ¶å™¨ï¼Œå®ç°ç«™ç‚¹è¯·æ±‚è·¯ç”±ï¼Œä»¥åŠç«™ç‚¹tlsé…ç½®\n\néƒ¨ç½²#PersistentVolumeClaim\nåˆ›å»ºæŒä¹…åŒ–å­˜å‚¨å·ï¼Œæœ‰æ•ˆé¿å…æ•°æ®ä¸¢å¤±ã€‚\n\n\nmysql pvc\n  apiVersion: v1kind: PersistentVolumeClaimmetadata:  name: blog-volumeclaimspec:  accessModes:\t- ReadWriteOnce  resources:\trequests:\t  storage: 2Gi\nstatic file pvc\n  apiVersion: v1kind: PersistentVolumeClaimmetadata:  name: blog-static-volumeclaimspec:  accessModes:\t- ReadWriteOnce  resources:\trequests:\t  storage: 100Mi\nmedia file pvc\n  apiVersion: v1kind: PersistentVolumeClaimmetadata:  name: blog-media-volumeclaimspec:  accessModes:\t- ReadWriteOnce  resources:\trequests:\t  storage: 512Mi\n\n#ingress controller\nä½¿ç”¨helmæ·»åŠ nginx ingressä»“åº“åœ°å€helm repo add stable https://kubernetes-charts.storage.googleapis.com\n\nç¼–å†™nginx ingress controlleré…ç½®\n controller:  kind: Deployment  replicaCount: 1  updateStrategy: \trollingUpdate:\t  maxUnavailable: 1\ttype: RollingUpdate  ingressClass: nginx  service:\tenabled: true\tenableHttp: true\tenableHttps: true\ttype: LoadBalancer  resources:\trequests:\t  cpu: 20m\t  memory: 64Mi\tlimits:\t  cpu: 50m\t  memory: 256Mi  defaultBackendService: default/web-servicedefaultBackend:  enabled: falserbac:  create: true\n *** è¿™é‡Œçš„é»˜è®¤åå°æœåŠ¡æˆ‘æ˜¯å†™çš„è‡ªå·±çš„ç«™ç‚¹ï¼Œæ ¼å¼ä¸ºnamespace&#x2F;service***\n\nå®‰è£nginx ingress controlleræœåŠ¡helm install nginx-ingress stable/nginx-ingress -f values.yaml\n\n\n#mysql\ndeployment\n  apiVersion: apps/v1kind: Deploymentmetadata:  name: mysqlspec:  selector:\tmatchLabels:\t  app: mysql  strategy:\ttype: Recreate  template:\tmetadata:\t  labels:\t\tapp: mysql\tspec:\t  containers:\t  - name: mysql\t\timage: mysql:latest\t\targs:\t\t- &quot;--default-authentication-plugin=mysql_native_password&quot;\t\tenv:\t\t- name: MYSQL_DATABASE\t\t  value: &quot;blog&quot;\t\t- name: MYSQL_USER\t\t  value: &quot;root&quot;\t\t- name: MYSQL_ROOT_PASSWORD\t\t  value: &quot;123456&quot;\t\tports:\t\t- containerPort: 3306\t\t  name: mysql\t\tvolumeMounts:\t\t- name: mysql-persistent-storage\t\t  mountPath: /var/lib/mysql\t\tresources:\t\t  requests:\t\t\tcpu: 50m\t\t\tmemory: 512Mi\t  volumes:\t  - name: mysql-persistent-storage\t\tpersistentVolumeClaim:\t\t  claimName: mysql-volumeclaim\nservice\n  apiVersion: v1kind: Servicemetadata:  name: mysql-servicespec:  type: ClusterIP  ports:  - port: 3306  selector:\tapp: mysql\n\n#redis\ndeployment\n  apiVersion: apps/v1kind: Deploymentmetadata:  name: redis-serverspec:  selector:\tmatchLabels:\t  app: redis-server  replicas: 1  template:\tmetadata:\t  labels:\t\tapp: redis-server\tspec:\t  containers:\t  - name: redis-server\t\timage: redis:latest\t\tports:\t\t- containerPort: 6379\t\tresources:\t\t  requests:\t\t\tcpu: 10m\t\t\tmemory: 100Mi\t\t  limits:\t\t\tcpu: 10m\t\t\tmemory: 128Mi\n\nservice\n  apiVersion: v1kind: Servicemetadata:  name: redis-servicespec:  type: NodePort  ports:  - port: 6379  selector:\tapp: redis-serve\n\n#nginx\ndeployment\n  apiVersion: apps/v1kind: Deploymentmetadata:  name: nginx-serverspec:  selector:\tmatchLabels:\t  app: nginx-server  replicas: 1  template:\tmetadata:\t  labels:\t\tapp: nginx-server\tspec:\t  volumes:\t  - name: nginx-volume\t\tconfigMap:\t\t  name: nginx-config\t\t  items:\t\t  - key: nginx.conf\t\t\tpath: nginx.conf\t  - name: blog-static-storage\t\tpersistentVolumeClaim:\t\t  claimName: blog-static-volumeclaim\t  - name: blog-media-storage\t\tpersistentVolumeClaim:\t\t  claimName: blog-media-volumeclaim\t  containers:\t  - name: nginx-server\t\timage: nginx:latest\t\tports:\t\t- containerPort: 80\t\tresources:\t\t  requests:\t\t\tcpu: 20m\t\t\tmemory: 256Mi\t\tvolumeMounts:\t\t- mountPath: /etc/nginx/conf.d\t\t  name: nginx-volume\t\t- name: blog-static-storage\t\t  mountPath: /usr/src/app/web/static\t\t- name: blog-media-storage\t\t  mountPath: /usr/src/app/web/media\n  ** éœ€è¦åˆ›å»ºnginx.conf configmapé…ç½®ã€‚*\n\nservice\n  apiVersion: v1kind: Servicemetadata:  name: nginx-service  labels:\tapp: nginx-servicespec:  type: NodePort  ports:  - port: 80\ttargetPort: 80\tprotocol: TCP\tname: http  selector:\tapp: nginx-server\n\n#web\ndeployment\n  apiVersion: apps/v1kind: Deploymentmetadata:  name: webspec:  selector: \tmatchLabels:\t  app: web  replicas: 3  strategy:\ttype: RollingUpdate\trollingUpdate:\t  maxSurge: 25%\t  maxUnavailable: 25%  minReadySeconds: 3  template:\tmetadata:\t  labels:\t\tapp: web\tspec:\t  containers:\t  - name: web\t\timage: asia.gcr.io/whl-vps/blog_web:latest\t\tcommand: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;python manage.py rebuild_index --noinput; uwsgi -i uwsgi.ini&quot;]\t\tenv:\t\t- name: DEBUG\t\t  value: &quot;0&quot;\t\t- name: DOMAIN\t\t  value: &quot;*&quot;\t\t- name: EMAIL_USER\t\t  value: &quot;9239****@qq.com&quot;\t\t- name: EMAIL_PASSWORD\t\t  value: &quot;*****&quot;\t\t- name: EMAIL_PORT\t\t  value: &quot;587&quot;\t\t- name: MYSQL_HOST\t\t  value: &quot;mysql-service&quot;\t\t- name: MYSQL_PORT\t\t  value: &quot;3306&quot;\t\t- name: MYSQL_DATABASE\t\t  value: &quot;blog&quot;\t\t- name: REDIS_HOST\t\t  value: &quot;redis-service&quot;\t\t- name: REDIS_PORT\t\t  value: &quot;6379&quot;\t\t- name: REDIS_DB\t\t  value: &quot;0&quot;\t\t- name: SECRET_KEY\t\t  value: &quot;*****&quot;\t\tports:\t\t- containerPort: 8000\t\t  protocol: TCP\t\tresources:\t\t  requests:\t\t\tcpu: 10m\t\t\tmemory: 128Mi\t\tvolumeMounts:\t\t- name: blog-static-storage\t\t  mountPath: /usr/src/app/web/static\t\t- name: blog-media-storage\t\t  mountPath: /usr/src/app/web/media\t  volumes:\t  - name: blog-static-storage\t\tpersistentVolumeClaim:\t\t  claimName: blog-static-volumeclaim \t  - name: blog-media-storage\t\tpersistentVolumeClaim:\t\t  claimName: blog-media-volumeclaim\n\nservice\n  apiVersion: v1kind: Servicemetadata:  name: web-servicespec:  type: NodePort  ports:  - port: 80\ttargetPort: 8000\tprotocol: TCP  selector:\tapp: web\n\ningress\n  apiVersion: extensions/v1beta1kind: Ingressmetadata:  name: web-ingress  annotations:\tkubernetes.io/ingress.class: nginx\tingress.kubernetes.io/rewrite-target: /\tnginx.ingress.kubernetes.io/from-to-www-redirect: &quot;true&quot;\tnginx.ingress.kubernetes.io/ssl-passthrough: &quot;true&quot;\tnginx.ingress.kubernetes.io/force-ssl-redirect: &quot;true&quot;spec:  tls:  - hosts:\t- www.thisblog.cn\tsecretName: tls-secret  rules:  - host: www.thisblog.cn\thttp:\t  paths:\t  - path: /\t\tbackend:\t\t  serviceName: web-service\t\t  servicePort: 80\t  - backend:\t\t  serviceName: nginx-service\t\t  servicePort: 80\t\tpath: /static\t  - backend:\t\t  serviceName: nginx-service\t\t  servicePort: 80\t\tpath: /media\n\ntls-secret\n  apiVersion: v1kind: Secretmetadata:  name: tls-secretdata:  tls.crt: &lt;base64&gt;  tls.key: &lt;base64&gt;\n  *** base64ç¼–ç å‘½ä»¤ï¼Œcat thisblog.cn.key | base64 or cat thisblog.cn.crt | base64 ***\n\n\n","categories":["Deploy"],"tags":["Blog","README","YAML"]},{"title":"TrojanæœåŠ¡éƒ¨ç½²","url":"/2020/04/05/trojan-server/","content":"trojan-gfwtrojan-gfw\n\n\nconfig\n  &#123;\t&quot;run_type&quot;: &quot;server&quot;,\t&quot;local_addr&quot;: &quot;0.0.0.0&quot;,\t&quot;local_port&quot;: 443,\t&quot;remote_addr&quot;: &quot;trojan-nginx&quot;,\t&quot;remote_port&quot;: 80,\t&quot;password&quot;: [\t\t&quot;mypassword&quot;\t],\t&quot;log_level&quot;: 1,\t&quot;ssl&quot;: &#123;\t\t&quot;cert&quot;: &quot;/cers/tls.crt&quot;,\t\t&quot;key&quot;: &quot;/cers/tls.key&quot;,\t\t&quot;key_password&quot;: &quot;&quot;,\t\t&quot;cipher&quot;: &quot;ECDHE-ECDSA-AES128-GCM-SHA256****&quot;,\t\t&quot;cipher_tls13&quot;: &quot;TLS_AES_128_GCM_SHA256***&quot;,\t\t&quot;prefer_server_cipher&quot;: true,\t\t&quot;alpn&quot;: [\t\t\t&quot;http/1.1&quot;\t\t],\t\t&quot;reuse_session&quot;: true,\t\t&quot;session_ticket&quot;: false,\t\t&quot;session_timeout&quot;: 600,\t\t&quot;plain_http_response&quot;: &quot;&quot;,\t\t&quot;curves&quot;: &quot;&quot;,\t\t&quot;dhparam&quot;: &quot;&quot;\t&#125;,\t&quot;tcp&quot;: &#123;\t\t&quot;prefer_ipv4&quot;: false,\t\t&quot;no_delay&quot;: true,\t\t&quot;keep_alive&quot;: true,\t\t&quot;reuse_port&quot;: false,\t\t&quot;fast_open&quot;: false,\t\t&quot;fast_open_qlen&quot;: 20\t&#125;,\t&quot;mysql&quot;: &#123;\t\t&quot;enabled&quot;: false,\t\t&quot;server_addr&quot;: &quot;trojan_db&quot;,\t\t&quot;server_port&quot;: 3306,\t\t&quot;database&quot;: &quot;trojan&quot;,\t\t&quot;username&quot;: &quot;trojan&quot;,\t\t&quot;password&quot;: &quot;123456&quot;\t&#125;&#125;\n\n** å°†tlsè¯ä¹¦æ”¾ç½®/cers/ç›®å½•*\nnginx\nå®‰è£…nginxè½¯ä»¶åŒ…yum install nginx -y\n\nå¯åŠ¨nginxæœåŠ¡\n  systemctl enable nginxsystemctl start nginx\n\ntrojan serviceåˆ›å»ºæœåŠ¡é…ç½®æ–‡ä»¶vim /etc/systemd/system/trojan.service\n\næœåŠ¡é…ç½®\n  [Unit]Description=trojanDocumentation=man:trojan(1) https://trojan-gfw.github.io/trojan/config https://trojan-gfw.github.io/trojan/After=network.target[Service]Type=simpleStandardError=journalUser=nobodyAmbientCapabilities=CAP_NET_BIND_SERVICEExecStart=/usr/bin/trojan -c /etc/trojan/config.jsonExecReload=/bin/kill -HUP $MAINPIDRestart=on-failureRestartSec=3s[Install]WantedBy=multi-user.target\n\næœåŠ¡å¯åŠ¨å‘½ä»¤\n  systemctl enable trojansystemctl start trojan\n\n","categories":["ç§‘å­¦ä¸Šç½‘"],"tags":["Trojan","Proxy"]},{"title":"v2rayå·¥å…·é…ç½®æ•™ç¨‹","url":"/2020/04/05/v2ray-server/","content":"\nå¸¸è¯´æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”ï¼Œæœ¬æ–‡ä¸»è¦è®²è§£å…³äºLinuxç³»ç»Ÿä¸‹å¦‚ä½•é…ç½®v2rayå·¥å…·ï¼Œå‡å®šä½ æ˜¯ä¸€ä¸ªæ‹¥æœ‰LinuxåŸºç¡€çš„ç”¨æˆ·ï¼Œä¸”åŠ¨æ‰‹èƒ½åŠ›å¼ºï¼Œç”Ÿå‘½åœ¨äºæŠ˜è…¾ã€‚\næœ¬æ–‡é‡‡ç”¨dockerå®¹å™¨å®‰è£…æ–¹å¼ï¼Œè‡³äºä¸ºä½•å¦‚æ­¤ï¼Œæˆ‘æƒ³ä½ æ‡‚çš„ã€‚\n\nå·¥å…·å‡†å¤‡\nè´­ä¹°VPSæˆ–ECSã€‚å‰æ®µæ—¶é—´ä¹°äº†å›½å¤–å‡ ä¸ªæœåŠ¡å•†çš„è¯•ç”¨äº†ä¸€ä¸‹ï¼Œæ€»æ‰€å‘¨çŸ¥çš„å‡ ä¸ªæœåŠ¡å•†çš„éƒ½ä¸èƒ½ç”¨ï¼Œåæ¥é€‰äº†ä¸€ä¸ªå°ä¼— çš„æŠ˜è…¾äº†ä¸€ä¸‹ï¼Œè™½ç„¶å‹‰å¼ºèƒ½ç”¨ï¼Œä½†æ¯•ç«Ÿæ¨ªè·¨å¤ªå¹³æ´‹ï¼Œè¿œç¨‹æ“ä½œæ—¶é‚£å«ä¸€ä¸ªå¡ã€‚åæ¥æŠ¥ç€è¯•ä¸€è¯•çš„æ€åº¦ä¹°äº†é˜¿é‡Œäº‘é¦™æ¸¯çš„VPSã€‚å½“ç„¶ä½¿ç”¨å‰è€ƒè™‘åˆ°æ¯•ç«Ÿæ˜¯å›½å†…æœåŠ¡å•†ï¼Œæƒ³å¿…ä¸€å®šå¾ˆä¸¥æ ¼ï¼ŒæŸ¥äº†ä¸€ä¸‹ç½‘ä¸Šå„ç§ä¸­å¥–ã€‚å› æ­¤è§‰å¾—å¸¸è§„çš„æ–¹å¼å®šç„¶è¡Œä¸é€šï¼Œäºæ˜¯ä¾¿æƒ³åˆ°äº†ç”¨dockerè¯•ä¸€è¯•åˆä½•å°ä¸å¯ï¼Œæ¯•ç«Ÿå®¹å™¨å•ç‹¬éš”ç¦»ã€‚åªæ˜¯è¿è¡Œv2rayå·¥å…·ï¼Œä¸€å°å°é¸¡è¶³çŸ£ï¼Œé…ç½®å¦‚ä¸‹ï¼š\n\nå†…å­˜1GCPU 1æ ¸ç£ç›˜25Gæµé‡1Tå¸¦å®½30Mbpsç³»ç»ŸCentos 7\n\n\næ‹‰å–v2rayé•œåƒã€‚ç”±äºé‡‡ç”¨dockerå®‰è£…ï¼Œé¦–å…ˆå¾—å®‰dockerè½¯ä»¶ã€‚\nyum install docker  # å®‰è£…dockersystemctl enable docker  # è®¾ç½®å¼€æœºå¯åŠ¨systemctl start docker  # å¯åŠ¨æœåŠ¡\nå›½å†…ç”¨æˆ·dockeræ‹‰å–é•œåƒæ—¶é€šå¸¸ä¼šå¾ˆæ…¢ï¼Œè¿™æ—¶æˆ‘ä»¬å¾—ä¿®æ”¹ä»“åº“åœ°å€ä¸ºå›½å†…åœ°å€ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é¦™æ¸¯çš„æœåŠ¡å™¨ï¼Œè‡ªç„¶ä¹Ÿå°±ä¸å­˜åœ¨æ…¢çš„æƒ…å†µäº†ã€‚\ndocker pull v2ray/official   # æ‹‰å–é•œåƒ\n\nåˆ›å»ºé…ç½®æ–‡ä»¶ã€‚åœ¨VPSç³»ç»Ÿ/etc/v2ray/ç›®å½•åˆ›å»ºé…ç½®æ–‡ä»¶config.jsonï¼Œå†™å…¥ä»¥ä¸‹æ ¼å¼å†…å®¹ã€‚\n&#123;  &quot;log&quot;: &#123;    &quot;access&quot;: &quot;/var/log/v2ray/access.log&quot;,    &quot;error&quot;: &quot;/var/log/v2ray/error.log&quot;,    &quot;loglevel&quot;: &quot;warning&quot;  &#125;,  &quot;dns&quot;: &#123;\t&quot;ip&quot;:&quot;8.8.8.8&quot;,\t&quot;port&quot;:53,\t&quot;isDNS&quot;:true  &#125;,  &quot;stats&quot;: &#123;&#125;,  &quot;inbounds&quot;: [    &#123;      &quot;protocol&quot;: &quot;vmess&quot;,      &quot;settings&quot;: &#123;        &quot;clients&quot;: [          &#123;            &quot;alterId&quot;: ***,            &quot;id&quot;: &quot;***&quot;          &#125;        ]      &#125;,      &quot;port&quot;: ***,      &quot;streamSettings&quot;: &#123;        &quot;tcpSettings&quot;: &#123;&#125;,        &quot;network&quot;: &quot;tcp&quot;,        &quot;security&quot;: &quot;auto&quot;      &#125;,      &quot;tag&quot;: &quot;in-0&quot;    &#125;  ],  &quot;outbounds&quot;: [    &#123;      &quot;tag&quot;: &quot;direct&quot;,      &quot;protocol&quot;: &quot;freedom&quot;,      &quot;settings&quot;: &#123;&#125;    &#125;,    &#123;      &quot;tag&quot;: &quot;blocked&quot;,      &quot;protocol&quot;: &quot;blackhole&quot;,      &quot;settings&quot;: &#123;&#125;    &#125;  ],  &quot;routing&quot;: &#123;    &quot;domainStrategy&quot;: &quot;AsIs&quot;,    &quot;rules&quot;: [      &#123;        &quot;outboundTag&quot;: &quot;blocked&quot;,        &quot;ip&quot;: [          &quot;geoip:private&quot;        ],        &quot;type&quot;: &quot;field&quot;      &#125;    ]  &#125;,  &quot;policy&quot;: &#123;&#125;,  &quot;reverse&quot;: &#123;&#125;,  &quot;transport&quot;: &#123;&#125;&#125;\nä¿®æ”¹é…ç½®ä¸­æ˜Ÿå·å†…å®¹æ›¿æ¢ä¸ºè‡ªå·±çš„é…ç½®ã€‚inbounds.clients.id:uuidæ ¼å¼å­—ç¬¦ä¸²inbounds.clients.alterId:ä»»æ„æ•°å­—ç¼–å·inbounds.port:å½“å‰é…ç½®é¡¹å¯¹åº”ç«¯å£å·ï¼Œå°½å¯èƒ½å››ä½ä»¥ä¸Šï¼Œé¿å…ä¸ç³»ç»Ÿç«¯å£å†²çªã€‚\n\ninbounds:é…ç½®ä¸­è¯¥èŠ‚ç‚¹ä¸ºä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥æœ‰å¤šä¸ªé…ç½®é¡¹ï¼Œå¯ä»¥æ˜¯åŒç§åè®®çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸åŒåè®®çš„ï¼Œåˆ‡è®°å¤šä¸ªé…ç½®ç«¯å£å·ä¸èƒ½ç›¸åŒï¼Œä¸åŒåè®®çš„é…ç½®èƒ½å®¹ç•¥æœ‰å·®å¼‚ã€‚åè®®åˆ—è¡¨\n\n\n\nå¯åŠ¨å®¹å™¨å¯åŠ¨æ–¹å¼æœ‰å¤šç§ï¼Œå¯ä»¥ç›´æ¥æ˜¯å‘½ä»¤è¡Œæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥å€Ÿç”¨docker-composeå·¥å…·å¯åŠ¨é…ç½®å¥½çš„å®¹å™¨ã€‚\n\nå‘½ä»¤è¡Œç›´æ¥å¯åŠ¨ï¼Œåå°æ‰§è¡Œä¸”å¼€æœºè‡ªå¯docker run -d --name v2ray --restart always -v /etc/v2ray:/etc/v2ray -p 16666:8888 -p 16668:8889 -p 16669:8890 v2ray/official v2ray -config=/etc/v2ray/config.json\n\n-d:åå°è¿è¡Œâ€“name:å®¹å™¨åç§°ï¼Œä¸èƒ½é‡å¤â€“restart:å®¹å™¨ä¼šéšç€æœåŠ¡çš„å¯åŠ¨è€Œå¯åŠ¨-v:æŒ‚è½½ç›®å½•ï¼Œç³»ç»Ÿç›®å½•:å®¹å™¨ä¸­ç›®å½•ï¼Œå°†ç³»ç»Ÿç›®å½•/etc/v2rayæŒ‚è½½åˆ°å®¹å™¨ä¸­çš„/etc/v2rayç›®å½•ï¼Œè¿™æ ·å®¹å™¨å°±èƒ½ç›´æ¥è®¿é—®/etc/v2rayä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œå½“éœ€è¦ä¿®æ”¹é…ç½®æ—¶ç›´æ¥ä¿®æ”¹ç³»ç»Ÿç›®å½•ä¸‹é…ç½®å³å¯-p:æš´éœ²ç«¯å£ï¼Œç³»ç»Ÿç«¯å£:å®¹å™¨ç«¯å£v2ray&#x2F;official:å®¹å™¨å¯åŠ¨çš„é•œåƒv2ray -config&#x3D;&#x2F;etc&#x2F;v2ray&#x2F;config.json:å®¹å™¨æ‰§è¡Œçš„å‘½ä»¤\n\n\n\nè‡³æ­¤å·¥å…·å·²ç»é…ç½®å®Œæˆï¼Œè¯·è®°å¾—æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å·²æ‰“å¼€ç›¸åº”ç«¯å£ã€‚åŠæ£€æŸ¥æœåŠ¡å•†åå°é˜²ç«å¢™æˆ–å®‰å…¨ç»„æ˜¯å¦å·²å…è®¸å¼€æ”¾ç›¸åº”ç«¯å£å·ï¼Œæ²¡æœ‰å°±åŠ ä¸€ä¸‹ï¼Œä¸ç„¶è®¿é—®ä¸é€šã€‚å®‰è£…å®¢æˆ·ç«¯å·¥å…·ï¼Œé…ç½®ç›¸åº”é…ç½®å³å¯ã€‚\n","categories":["ç§‘å­¦ä¸Šç½‘"],"tags":["Proxy","V2ray"]},{"title":"å¼€å‘ä¸­è¸©è¿‡çš„é‚£äº›å‘...","url":"/2020/04/04/works-bug/","content":"è¡¨è¾¾å¼æ ‘è¡¨è¾¾å¼æ ‘ä»¥æ ‘å½¢æ•°æ®ç»“æ„è¡¨ç¤ºä»£ç ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ç§è¡¨è¾¾å¼ï¼Œé€»è¾‘ä»¥è¡¨è¾¾å¼çš„æ–¹å¼å­˜å‚¨åœ¨æ ‘çŠ¶ç»“æ„é‡Œï¼Œä»è€Œå¯ä»¥åœ¨è¿è¡Œæ—¶å»è§£æè¿™ä¸ªæ ‘ï¼Œç„¶åæ‰§è¡Œï¼Œå®ç°åŠ¨æ€çš„ç¼–è¾‘å’Œæ‰§è¡Œä»£ç ï¼Œåœ¨ä¸åŒæ•°æ®åº“ä¸­æ‰§è¡Œ LINQ æŸ¥è¯¢ä»¥åŠåˆ›å»ºåŠ¨æ€æŸ¥è¯¢ã€‚\n\n1.ä½¿ç”¨lambdaè¡¨è¾¾å¼åˆ›å»ºè¡¨è¾¾å¼æ ‘\nExpression&lt;Func&lt;int, int&gt;&gt; expr = num =&gt; num * 2;Func&lt;int, int&gt; result = expr.Compile();Console.Write(result(5));\næ‰“å°è¾“å‡ºï¼š\n\n10\n\nä»¥ä¸Šè¡¨è¾¾å¼æ ‘ç¼–è¯‘åï¼Œè¿”å›ä¸€ä¸ªå¸¦è¾“å…¥è¾“å‡ºå‚æ•°çš„å§”æ‰˜å¯¹è±¡ã€‚\n2.ä½¿ç”¨LINQæŸ¥è¯¢æ•°æ®æ—¶ï¼Œä¼ é€’é”™è¯¯çš„è¡¨è¾¾å¼å‚æ•°å¯¼è‡´æ•°æ®åº“å…¨è¡¨æŸ¥è¯¢ã€‚è¿™é‡Œåªæ¼”ç¤ºLINQæŸ¥è¯¢æ—¶çš„æ ¸å¿ƒéƒ¨åˆ†ä»£ç ã€‚\n\né”™è¯¯ä½¿ç”¨ï¼š\nFunc&lt;UserInfo, bool&gt; filter = u =&gt; u.Id == 1 &amp;&amp; u.IsDelete == false;var users = dbContext.UserInfos.Where(filter).ToList();\nSQL\n\nSELECT Id, Nameâ€¦ FROM UserInfo\n\n  ä»¥ä¸Šå¼ä¾‹ä¸­ä¼ é€’çš„æŸ¥è¯¢æ¡ä»¶å¹¶éè¡¨ç¤ºå¼æ ‘ï¼Œè€Œæ˜¯ä¸€ä¸ªå§”æ‰˜å¯¹è±¡ã€‚è™½ç„¶ç¼–è¯‘æ—¶ç¼–è¯‘å™¨å¹¶ä¸ä¼šæŠ¥é”™ï¼Œä½†åœ¨å®é™…æŸ¥è¯¢æ—¶ï¼Œç›‘æ§SQLæŸ¥è¯¢è¯­å¥ä½ ä¼šå‘ç°æŸ¥è¯¢æ¡ä»¶å¹¶æ²¡æœ‰åŒ…å«åœ¨SQLè¯­å¥ä¸­ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æ¯æ¬¡æŸ¥è¯¢æ—¶ä¼šå…¨è¡¨æŸ¥è¯¢ï¼ŒæŠŠæ‰€æœ‰æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åä½¿ç”¨å§”æ‰˜è¿‡æ»¤æ‰ã€‚è™½ç„¶ä¸šåŠ¡å®ç°äº†ï¼Œä½†åœ¨å¤§é‡å¹¶å‘è¯·æ±‚æ—¶å¯¼è‡´çš„å†…å­˜æ¶ˆè€—æ— ç–‘æ˜¯ä¸€åœºç¾éš¾ã€‚\n\næ­£ç¡®ä½¿ç”¨ï¼š\nExpression&lt;Func&lt;UserInfo, bool&gt;&gt; filter = u =&gt; u.Id == 1 &amp;&amp; u.IsDelete == false;var users = dbContext.UserInfos.Where(filter).ToList();\nSQL\n\nSELECT Id, Nameâ€¦ FROM UserInfo WHERE Id &#x3D; 1 AND IsDelete &#x3D; 0\n\n\n\nUri.EscapeDataString\n.Net HttpClient Invalid URI: The Uri string is too long\n\nåœ¨ä½¿ç”¨HttpClienté€šè¿‡Postå‘é€å¤§é‡æ•°æ®è¯·æ±‚æ—¶ï¼ŒæŠ¥é”™â€œæ— æ•ˆçš„URIï¼šUriå­—ç¬¦ä¸²å¤ªé•¿â€ï¼Œç”±äºè½¬ä¹‰å­—ç¬¦ä¸²è¶…è¿‡æœ€å¤§é•¿åº¦é™åˆ¶ã€‚ä¸åŒç‰ˆæœ¬ï¼ˆ.NETï¼‰é™åˆ¶é•¿åº¦ï¼š\n\n\n\nç‰ˆæœ¬\né™åˆ¶é•¿åº¦\næœ‰æ•ˆé•¿åº¦\n\n\n\n&lt; 4.5\n32766\n32765\n\n\n&gt;&#x3D; 4.5\n65520\n65519\n\n\nè§£å†³æ–¹æ¡ˆï¼š\npublic static string EncodeString(string content)&#123;    // maxLengthAllowed .NET &lt; 4.5 = 32765;    // maxLengthAllowed .NET &gt;= 4.5 = 65519;    int maxLengthAllowed = 65519;    StringBuilder sb = new StringBuilder();\tint loops = content.Length / maxLengthAllowed;\t\tfor(int i = 0; i &lt;= loops; i++)&#123;\t\tsb.Append(Uri.EscapeDataString(i &lt; loops \t\t? content.Substring(i * maxLengthAllowed, maxLengthAllowed)\t\t: content.Substring(i * maxLengthAllowed)\t\t));\t\t\t\treturn sb.ToString();\t&#125;&#125;\nä½¿ç”¨Postå‘é€å¯¹è±¡æ•°æ®æ—¶ï¼Œcontentæ ¼å¼ä¸ºâ€œkey&#x3D;value&amp;key1&#x3D;value1&amp;â€¦.â€\n","categories":["C#"],"tags":["debug"]}]